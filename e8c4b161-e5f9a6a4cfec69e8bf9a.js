"use strict";(self.webpackChunksme_dlsu=self.webpackChunksme_dlsu||[]).push([[1845],{1133:function(e,n,t){t.d(n,{Gc:function(){return Ln},H2:function(){return qn},VS:function(){return Xn},Zk:function(){return v},ck:function(){return jn},fM:function(){return zn}});var o=t(4848),r=t(6540),s=t(6100),i=t(2275),a=t(2774),d=t(3402);t(961);const l=(0,r.createContext)(null),c=l.Provider,u=i.xc.error001();function g(e,n){const t=(0,r.useContext)(l);if(null===t)throw new Error(u);return(0,a.n)(t,e,n)}function p(){const e=(0,r.useContext)(l);if(null===e)throw new Error(u);return(0,r.useMemo)((()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe})),[e])}const m={display:"none"},h={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},f="react-flow__node-desc",S="react-flow__edge-desc",y=e=>e.ariaLiveMessage;function b({rfId:e}){const n=g(y);return(0,o.jsx)("div",{id:`react-flow__aria-live-${e}`,"aria-live":"assertive","aria-atomic":"true",style:h,children:n})}function C({rfId:e,disableKeyboardA11y:n}){return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{id:`${f}-${e}`,style:m,children:["Press enter or space to select a node.",!n&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "]}),(0,o.jsx)("div",{id:`${S}-${e}`,style:m,children:"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."}),!n&&(0,o.jsx)(b,{rfId:e})]})}const x=e=>e.userSelectionActive?"none":"all",v=(0,r.forwardRef)((({position:e="top-left",children:n,className:t,style:r,...i},a)=>{const d=g(x),l=`${e}`.split("-");return(0,o.jsx)("div",{className:(0,s.A)(["react-flow__panel",t,...l]),style:{...r,pointerEvents:d},ref:a,...i,children:n})}));function w({proOptions:e,position:n="bottom-right"}){return e?.hideAttribution?null:(0,o.jsx)(v,{position:n,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:(0,o.jsx)("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}v.displayName="Panel";const E=e=>{const n=[],t=[];for(const[,t]of e.nodeLookup)t.selected&&n.push(t.internals.userNode);for(const[,n]of e.edgeLookup)n.selected&&t.push(n);return{selectedNodes:n,selectedEdges:t}},k=e=>e.id;function N(e,n){return(0,d.x)(e.selectedNodes.map(k),n.selectedNodes.map(k))&&(0,d.x)(e.selectedEdges.map(k),n.selectedEdges.map(k))}function M({onSelectionChange:e}){const n=p(),{selectedNodes:t,selectedEdges:o}=g(E,N);return(0,r.useEffect)((()=>{const r={nodes:t,edges:o};e?.(r),n.getState().onSelectionChangeHandlers.forEach((e=>e(r)))}),[t,o,e]),null}const P=e=>!!e.onSelectionChangeHandlers;function D({onSelectionChange:e}){const n=g(P);return e||n?(0,o.jsx)(M,{onSelectionChange:e}):null}const O=[0,0],R={x:0,y:0,zoom:1},I=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","onBeforeDelete","debug","autoPanSpeed","paneClickDistance","rfId"],A=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setPaneClickDistance:e.setPaneClickDistance}),L={translateExtent:i.ZO,nodeOrigin:O,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1",paneClickDistance:0};function j(e){const{setNodes:n,setEdges:t,setMinZoom:o,setMaxZoom:s,setTranslateExtent:i,setNodeExtent:a,reset:l,setDefaultNodesAndEdges:c,setPaneClickDistance:u}=g(A,d.x),m=p();(0,r.useEffect)((()=>(c(e.defaultNodes,e.defaultEdges),()=>{h.current=L,l()})),[]);const h=(0,r.useRef)(L);return(0,r.useEffect)((()=>{for(const r of I){const d=e[r];d!==h.current[r]&&(void 0!==e[r]&&("nodes"===r?n(d):"edges"===r?t(d):"minZoom"===r?o(d):"maxZoom"===r?s(d):"translateExtent"===r?i(d):"nodeExtent"===r?a(d):"paneClickDistance"===r?u(d):"fitView"===r?m.setState({fitViewOnInit:d}):"fitViewOptions"===r?m.setState({fitViewOnInitOptions:d}):m.setState({[r]:d})))}h.current=e}),I.map((n=>e[n]))),null}function z(){return"undefined"!=typeof window&&window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)"):null}const _="undefined"!=typeof document?document:null;function B(e=null,n={target:_,actInsideInputWithModifier:!0}){const[t,o]=(0,r.useState)(!1),s=(0,r.useRef)(!1),a=(0,r.useRef)(new Set([])),[d,l]=(0,r.useMemo)((()=>{if(null!==e){const n=(Array.isArray(e)?e:[e]).filter((e=>"string"==typeof e)).map((e=>e.replace("+","\n").replace("\n\n","\n+").split("\n"))),t=n.reduce(((e,n)=>e.concat(...n)),[]);return[n,t]}return[[],[]]}),[e]);return(0,r.useEffect)((()=>{const t=n?.target||_;if(null!==e){const e=e=>{s.current=e.ctrlKey||e.metaKey||e.shiftKey;if((!s.current||s.current&&!n.actInsideInputWithModifier)&&(0,i.v5)(e))return!1;const t=Z(e.code,l);a.current.add(e[t]),V(d,a.current,!1)&&(e.preventDefault(),o(!0))},r=e=>{if((!s.current||s.current&&!n.actInsideInputWithModifier)&&(0,i.v5)(e))return!1;const t=Z(e.code,l);V(d,a.current,!0)?(o(!1),a.current.clear()):a.current.delete(e[t]),"Meta"===e.key&&a.current.clear(),s.current=!1},c=()=>{a.current.clear(),o(!1)};return t?.addEventListener("keydown",e),t?.addEventListener("keyup",r),window.addEventListener("blur",c),window.addEventListener("contextmenu",c),()=>{t?.removeEventListener("keydown",e),t?.removeEventListener("keyup",r),window.removeEventListener("blur",c),window.removeEventListener("contextmenu",c)}}}),[e,o]),t}function V(e,n,t){return e.filter((e=>t||e.length===n.size)).some((e=>e.every((e=>n.has(e)))))}function Z(e,n){return n.includes(e)?"code":"key"}function $(e,n){const t=[],o=new Map,r=[];for(const n of e)if("add"!==n.type)if("remove"===n.type||"replace"===n.type)o.set(n.id,[n]);else{const e=o.get(n.id);e?e.push(n):o.set(n.id,[n])}else r.push(n);for(const e of n){const n=o.get(e.id);if(!n){t.push(e);continue}if("remove"===n[0].type)continue;if("replace"===n[0].type){t.push({...n[0].item});continue}const r={...e};for(const e of n)T(e,r);t.push(r)}return r.length&&r.forEach((e=>{void 0!==e.index?t.splice(e.index,0,{...e.item}):t.push({...e.item})})),t}function T(e,n){switch(e.type){case"select":n.selected=e.selected;break;case"position":void 0!==e.position&&(n.position=e.position),void 0!==e.dragging&&(n.dragging=e.dragging);break;case"dimensions":void 0!==e.dimensions&&(n.measured??={},n.measured.width=e.dimensions.width,n.measured.height=e.dimensions.height,e.setAttributes&&(n.width=e.dimensions.width,n.height=e.dimensions.height)),"boolean"==typeof e.resizing&&(n.resizing=e.resizing)}}function X(e,n){return $(e,n)}function H(e,n){return $(e,n)}function W(e,n){return{id:e,type:"select",selected:n}}function F(e,n=new Set,t=!1){const o=[];for(const[r,s]of e){const e=n.has(r);void 0===s.selected&&!e||s.selected===e||(t&&(s.selected=e),o.push(W(s.id,e)))}return o}function K({items:e=[],lookup:n}){const t=[],o=new Map(e.map((e=>[e.id,e])));for(const[o,r]of e.entries()){const e=n.get(r.id),s=e?.internals?.userNode??e;void 0!==s&&s!==r&&t.push({id:r.id,item:r,type:"replace"}),void 0===s&&t.push({item:r,type:"add",index:o})}for(const[e]of n){void 0===o.get(e)&&t.push({id:e,type:"remove"})}return t}function Y(e){return{id:e.id,type:"remove"}}const G=e=>(0,i.oB)(e);function U(e){return(0,r.forwardRef)(e)}const Q="undefined"!=typeof window?r.useLayoutEffect:r.useEffect;function q(e){const[n,t]=(0,r.useState)(BigInt(0)),[o]=(0,r.useState)((()=>function(e){let n=[];return{get:()=>n,reset:()=>{n=[]},push:t=>{n.push(t),e()}}}((()=>t((e=>e+BigInt(1)))))));return Q((()=>{const n=o.get();n.length&&(e(n),o.reset())}),[n]),o}const J=(0,r.createContext)(null);function ee({children:e}){const n=p(),t=q((0,r.useCallback)((e=>{const{nodes:t=[],setNodes:o,hasDefaultNodes:r,onNodesChange:s,nodeLookup:i}=n.getState();let a=t;for(const n of e)a="function"==typeof n?n(a):n;r?o(a):s&&s(K({items:a,lookup:i}))}),[])),s=q((0,r.useCallback)((e=>{const{edges:t=[],setEdges:o,hasDefaultEdges:r,onEdgesChange:s,edgeLookup:i}=n.getState();let a=t;for(const n of e)a="function"==typeof n?n(a):n;r?o(a):s&&s(K({items:a,lookup:i}))}),[])),i=(0,r.useMemo)((()=>({nodeQueue:t,edgeQueue:s})),[]);return(0,o.jsx)(J.Provider,{value:i,children:e})}const ne=e=>!!e.panZoom;function te(){const e=(()=>{const e=p();return(0,r.useMemo)((()=>({zoomIn:n=>{const{panZoom:t}=e.getState();return t?t.scaleBy(1.2,{duration:n?.duration}):Promise.resolve(!1)},zoomOut:n=>{const{panZoom:t}=e.getState();return t?t.scaleBy(1/1.2,{duration:n?.duration}):Promise.resolve(!1)},zoomTo:(n,t)=>{const{panZoom:o}=e.getState();return o?o.scaleTo(n,{duration:t?.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(n,t)=>{const{transform:[o,r,s],panZoom:i}=e.getState();return i?(await i.setViewport({x:n.x??o,y:n.y??r,zoom:n.zoom??s},{duration:t?.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[n,t,o]=e.getState().transform;return{x:n,y:t,zoom:o}},fitView:n=>{const{nodeLookup:t,minZoom:o,maxZoom:r,panZoom:s,domNode:a}=e.getState();if(!s||!a)return Promise.resolve(!1);const d=(0,i.YV)(t,n),{width:l,height:c}=(0,i.Eo)(a);return(0,i.Pr)({nodes:d,width:l,height:c,minZoom:o,maxZoom:r,panZoom:s},n)},setCenter:async(n,t,o)=>{const{width:r,height:s,maxZoom:i,panZoom:a}=e.getState(),d=void 0!==o?.zoom?o.zoom:i,l=r/2-n*d,c=s/2-t*d;return a?(await a.setViewport({x:l,y:c,zoom:d},{duration:o?.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitBounds:async(n,t)=>{const{width:o,height:r,minZoom:s,maxZoom:a,panZoom:d}=e.getState(),l=(0,i.R4)(n,o,r,s,a,t?.padding??.1);return d?(await d.setViewport(l,{duration:t?.duration}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(n,t={})=>{const{transform:o,snapGrid:r,snapToGrid:s,domNode:a}=e.getState();if(!a)return n;const{x:d,y:l}=a.getBoundingClientRect(),c={x:n.x-d,y:n.y-l},u=t.snapGrid??r,g=t.snapToGrid??s;return(0,i.Ff)(c,o,g,u)},flowToScreenPosition:n=>{const{transform:t,domNode:o}=e.getState();if(!o)return n;const{x:r,y:s}=o.getBoundingClientRect(),a=(0,i.zj)(n,t);return{x:a.x+r,y:a.y+s}}})),[])})(),n=p(),t=function(){const e=(0,r.useContext)(J);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}(),o=g(ne),s=(0,r.useMemo)((()=>{const e=e=>n.getState().nodeLookup.get(e),o=e=>{t.nodeQueue.push(e)},r=e=>{t.edgeQueue.push(e)},s=e=>{const{nodeLookup:t,nodeOrigin:o}=n.getState(),r=G(e)?e:t.get(e.id),s=r.parentId?(0,i.us)(r.position,r.measured,r.parentId,t,o):r.position,a={...r,position:s,width:r.measured?.width??r.width,height:r.measured?.height??r.height};return(0,i.kM)(a)},a=(e,n,t={replace:!1})=>{o((o=>o.map((o=>{if(o.id===e){const e="function"==typeof n?n(o):n;return t.replace&&G(e)?e:{...o,...e}}return o}))))},d=(e,n,t={replace:!1})=>{r((o=>o.map((o=>{if(o.id===e){const e="function"==typeof n?n(o):n;return t.replace&&(r=e,(0,i.b$)(r))?e:{...o,...e}}var r;return o}))))};return{getNodes:()=>n.getState().nodes.map((e=>({...e}))),getNode:n=>e(n)?.internals.userNode,getInternalNode:e,getEdges:()=>{const{edges:e=[]}=n.getState();return e.map((e=>({...e})))},getEdge:e=>n.getState().edgeLookup.get(e),setNodes:o,setEdges:r,addNodes:e=>{const n=Array.isArray(e)?e:[e];t.nodeQueue.push((e=>[...e,...n]))},addEdges:e=>{const n=Array.isArray(e)?e:[e];t.edgeQueue.push((e=>[...e,...n]))},toObject:()=>{const{nodes:e=[],edges:t=[],transform:o}=n.getState(),[r,s,i]=o;return{nodes:e.map((e=>({...e}))),edges:t.map((e=>({...e}))),viewport:{x:r,y:s,zoom:i}}},deleteElements:async({nodes:e=[],edges:t=[]})=>{const{nodes:o,edges:r,onNodesDelete:s,onEdgesDelete:a,triggerNodeChanges:d,triggerEdgeChanges:l,onDelete:c,onBeforeDelete:u}=n.getState(),{nodes:g,edges:p}=await(0,i.Tq)({nodesToRemove:e,edgesToRemove:t,nodes:o,edges:r,onBeforeDelete:u}),m=p.length>0,h=g.length>0;if(m){const e=p.map(Y);a?.(p),l(e)}if(h){const e=g.map(Y);s?.(g),d(e)}return(h||m)&&c?.({nodes:g,edges:p}),{deletedNodes:g,deletedEdges:p}},getIntersectingNodes:(e,t=!0,o)=>{const r=(0,i.mW)(e),a=r?e:s(e),d=void 0!==o;return a?(o||n.getState().nodes).filter((o=>{const s=n.getState().nodeLookup.get(o.id);if(s&&!r&&(o.id===e.id||!s.internals.positionAbsolute))return!1;const l=(0,i.kM)(d?o:s),c=(0,i.X6)(l,a);return t&&c>0||c>=a.width*a.height})):[]},isNodeIntersecting:(e,n,t=!0)=>{const o=(0,i.mW)(e)?e:s(e);if(!o)return!1;const r=(0,i.X6)(o,n);return t&&r>0||r>=o.width*o.height},updateNode:a,updateNodeData:(e,n,t={replace:!1})=>{a(e,(e=>{const o="function"==typeof n?n(e):n;return t.replace?{...e,data:o}:{...e,data:{...e.data,...o}}}),t)},updateEdge:d,updateEdgeData:(e,n,t={replace:!1})=>{d(e,(e=>{const o="function"==typeof n?n(e):n;return t.replace?{...e,data:o}:{...e,data:{...e.data,...o}}}),t)},getNodesBounds:e=>{const{nodeLookup:t,nodeOrigin:o}=n.getState();return(0,i.Jo)(e,{nodeLookup:t,nodeOrigin:o})},getHandleConnections:({type:e,id:t,nodeId:o})=>Array.from(n.getState().connectionLookup.get(`${o}-${e}${t?`-${t}`:""}`)?.values()??[]),getNodeConnections:({type:e,handleId:t,nodeId:o})=>Array.from(n.getState().connectionLookup.get(`${o}${e?t?`-${e}-${t}`:`-${e}`:""}`)?.values()??[])}}),[]);return(0,r.useMemo)((()=>({...s,...e,viewportInitialized:o})),[o])}const oe=e=>e.selected,re={actInsideInputWithModifier:!1},se="undefined"!=typeof window?window:void 0;const ie={position:"absolute",width:"100%",height:"100%",top:0,left:0},ae=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib});function de({onPaneContextMenu:e,zoomOnScroll:n=!0,zoomOnPinch:t=!0,panOnScroll:s=!1,panOnScrollSpeed:a=.5,panOnScrollMode:l=i.ny.Free,zoomOnDoubleClick:c=!0,panOnDrag:u=!0,defaultViewport:m,translateExtent:h,minZoom:f,maxZoom:S,zoomActivationKeyCode:y,preventScrolling:b=!0,children:C,noWheelClassName:x,noPanClassName:v,onViewportChange:w,isControlledViewport:E,paneClickDistance:k}){const N=p(),M=(0,r.useRef)(null),{userSelectionActive:P,lib:D}=g(ae,d.x),O=B(y),R=(0,r.useRef)();!function(e){const n=p();(0,r.useEffect)((()=>{const t=()=>{if(!e.current)return!1;const t=(0,i.Eo)(e.current);0!==t.height&&0!==t.width||n.getState().onError?.("004",i.xc.error004()),n.setState({width:t.width||500,height:t.height||500})};if(e.current){t(),window.addEventListener("resize",t);const n=new ResizeObserver((()=>t()));return n.observe(e.current),()=>{window.removeEventListener("resize",t),n&&e.current&&n.unobserve(e.current)}}}),[])}(M);const I=(0,r.useCallback)((e=>{w?.({x:e[0],y:e[1],zoom:e[2]}),E||N.setState({transform:e})}),[w,E]);return(0,r.useEffect)((()=>{if(M.current){R.current=(0,i.kO)({domNode:M.current,minZoom:f,maxZoom:S,translateExtent:h,viewport:m,paneClickDistance:k,onDraggingChange:e=>N.setState({paneDragging:e}),onPanZoomStart:(e,n)=>{const{onViewportChangeStart:t,onMoveStart:o}=N.getState();o?.(e,n),t?.(n)},onPanZoom:(e,n)=>{const{onViewportChange:t,onMove:o}=N.getState();o?.(e,n),t?.(n)},onPanZoomEnd:(e,n)=>{const{onViewportChangeEnd:t,onMoveEnd:o}=N.getState();o?.(e,n),t?.(n)}});const{x:e,y:n,zoom:t}=R.current.getViewport();return N.setState({panZoom:R.current,transform:[e,n,t],domNode:M.current.closest(".react-flow")}),()=>{R.current?.destroy()}}}),[]),(0,r.useEffect)((()=>{R.current?.update({onPaneContextMenu:e,zoomOnScroll:n,zoomOnPinch:t,panOnScroll:s,panOnScrollSpeed:a,panOnScrollMode:l,zoomOnDoubleClick:c,panOnDrag:u,zoomActivationKeyPressed:O,preventScrolling:b,noPanClassName:v,userSelectionActive:P,noWheelClassName:x,lib:D,onTransformChange:I})}),[e,n,t,s,a,l,c,u,O,b,v,P,x,D,I]),(0,o.jsx)("div",{className:"react-flow__renderer",ref:M,style:ie,children:C})}const le=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function ce(){const{userSelectionActive:e,userSelectionRect:n}=g(le,d.x);return e&&n?(0,o.jsx)("div",{className:"react-flow__selection react-flow__container",style:{width:n.width,height:n.height,transform:`translate(${n.x}px, ${n.y}px)`}}):null}const ue=(e,n)=>t=>{t.target===n.current&&e?.(t)},ge=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging});function pe({isSelecting:e,selectionKeyPressed:n,selectionMode:t=i.Qc.Full,panOnDrag:a,selectionOnDrag:l,onSelectionStart:c,onSelectionEnd:u,onPaneClick:m,onPaneContextMenu:h,onPaneScroll:f,onPaneMouseEnter:S,onPaneMouseMove:y,onPaneMouseLeave:b,children:C}){const x=p(),{userSelectionActive:v,elementsSelectable:w,dragging:E}=g(ge,d.x),k=w&&(e||v),N=(0,r.useRef)(null),M=(0,r.useRef)(),P=(0,r.useRef)(new Set),D=(0,r.useRef)(new Set),O=(0,r.useRef)(!1),R=(0,r.useRef)(!1),I=e=>{O.current?O.current=!1:(m?.(e),x.getState().resetSelectedElements(),x.setState({nodesSelectionActive:!1}))},A=f?e=>f(e):void 0,L=!0===a||Array.isArray(a)&&a.includes(0);return(0,o.jsxs)("div",{className:(0,s.A)(["react-flow__pane",{draggable:L,dragging:E,selection:e}]),onClick:k?void 0:ue(I,N),onContextMenu:ue((e=>{Array.isArray(a)&&a?.includes(2)?e.preventDefault():h?.(e)}),N),onWheel:ue(A,N),onPointerEnter:k?void 0:S,onPointerDown:k?n=>{const{resetSelectedElements:t,domNode:o}=x.getState();if(M.current=o?.getBoundingClientRect(),!w||!e||0!==n.button||n.target!==N.current||!M.current)return;n.target?.setPointerCapture?.(n.pointerId),R.current=!0,O.current=!1;const{x:r,y:s}=(0,i.q1)(n.nativeEvent,M.current);t(),x.setState({userSelectionRect:{width:0,height:0,startX:r,startY:s,x:r,y:s}}),c?.(n)}:y,onPointerMove:k?e=>{const{userSelectionRect:n,transform:o,nodeLookup:r,edgeLookup:s,connectionLookup:a,triggerNodeChanges:d,triggerEdgeChanges:l,defaultEdgeOptions:c}=x.getState();if(!M.current||!n)return;O.current=!0;const{x:u,y:g}=(0,i.q1)(e.nativeEvent,M.current),{startX:p,startY:m}=n,h={startX:p,startY:m,x:u<p?u:p,y:g<m?g:m,width:Math.abs(u-p),height:Math.abs(g-m)},f=P.current,S=D.current;P.current=new Set((0,i.U$)(r,h,o,t===i.Qc.Partial,!0).map((e=>e.id))),D.current=new Set;const y=c?.selectable??!0;for(const e of P.current){const n=a.get(e);if(n)for(const{edgeId:e}of n.values()){const n=s.get(e);n&&(n.selectable??y)&&D.current.add(e)}}if(!(0,i._s)(f,P.current)){d(F(r,P.current,!0))}if(!(0,i._s)(S,D.current)){l(F(s,D.current))}x.setState({userSelectionRect:h,userSelectionActive:!0,nodesSelectionActive:!1})}:y,onPointerUp:k?e=>{if(0!==e.button||!R.current)return;e.target?.releasePointerCapture?.(e.pointerId);const{userSelectionRect:t}=x.getState();!v&&t&&e.target===N.current&&I?.(e),x.setState({userSelectionActive:!1,userSelectionRect:null,nodesSelectionActive:P.current.size>0}),u?.(e),(n||l)&&(O.current=!1),R.current=!1}:void 0,onPointerLeave:b,ref:N,style:ie,children:[C,(0,o.jsx)(ce,{})]})}function me({id:e,store:n,unselect:t=!1,nodeRef:o}){const{addSelectedNodes:r,unselectNodesAndEdges:s,multiSelectionActive:a,nodeLookup:d,onError:l}=n.getState(),c=d.get(e);c?(n.setState({nodesSelectionActive:!1}),c.selected?(t||c.selected&&a)&&(s({nodes:[c],edges:[]}),requestAnimationFrame((()=>o?.current?.blur()))):r([e])):l?.("012",i.xc.error012(e))}function he({nodeRef:e,disabled:n=!1,noDragClassName:t,handleSelector:o,nodeId:s,isSelectable:a,nodeClickDistance:d}){const l=p(),[c,u]=(0,r.useState)(!1),g=(0,r.useRef)();return(0,r.useEffect)((()=>{g.current=(0,i.I$)({getStoreItems:()=>l.getState(),onNodeMouseDown:n=>{me({id:n,store:l,nodeRef:e})},onDragStart:()=>{u(!0)},onDragStop:()=>{u(!1)}})}),[]),(0,r.useEffect)((()=>{if(n)g.current?.destroy();else if(e.current)return g.current?.update({noDragClassName:t,handleSelector:o,domNode:e.current,isSelectable:a,nodeId:s,nodeClickDistance:d}),()=>{g.current?.destroy()}}),[t,o,n,a,e,s]),c}function fe(){const e=p();return(0,r.useCallback)((n=>{const{nodeExtent:t,snapToGrid:o,snapGrid:r,nodesDraggable:s,onError:a,updateNodePositions:d,nodeLookup:l,nodeOrigin:c}=e.getState(),u=new Map,g=(e=>n=>n.selected&&(n.draggable||e&&void 0===n.draggable))(s),p=o?r[0]:5,m=o?r[1]:5,h=n.direction.x*p*n.factor,f=n.direction.y*m*n.factor;for(const[,e]of l){if(!g(e))continue;let n={x:e.internals.positionAbsolute.x+h,y:e.internals.positionAbsolute.y+f};o&&(n=(0,i.s_)(n,r));const{position:s,positionAbsolute:d}=(0,i.aE)({nodeId:e.id,nextPosition:n,nodeLookup:l,nodeExtent:t,nodeOrigin:c,onError:a});e.position=s,e.internals.positionAbsolute=d,u.set(e.id,e)}d(u)}),[])}const Se=(0,r.createContext)(null),ye=Se.Provider;Se.Consumer;const be=()=>(0,r.useContext)(Se),Ce=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId});const xe=(0,r.memo)(U((function({type:e="source",position:n=i.yX.Top,isValidConnection:t,isConnectable:r=!0,isConnectableStart:a=!0,isConnectableEnd:l=!0,id:c,onConnect:u,children:m,className:h,onMouseDown:f,onTouchStart:S,...y},b){const C=c||null,x="target"===e,v=p(),w=be(),{connectOnClick:E,noPanClassName:k,rfId:N}=g(Ce,d.x),{connectingFrom:M,connectingTo:P,clickConnecting:D,isPossibleEndHandle:O,connectionInProcess:R,valid:I}=g(((e,n,t)=>o=>{const{connectionClickStartHandle:r,connectionMode:s,connection:a}=o,{fromHandle:d,toHandle:l,isValid:c}=a,u=l?.nodeId===e&&l?.id===n&&l?.type===t;return{connectingFrom:d?.nodeId===e&&d?.id===n&&d?.type===t,connectingTo:u,clickConnecting:r?.nodeId===e&&r?.id===n&&r?.type===t,isPossibleEndHandle:s===i.WZ.Strict?d?.type!==t:e!==d?.nodeId||n!==d?.id,connectionInProcess:!!d,valid:u&&c}})(w,C,e),d.x);w||v.getState().onError?.("010",i.xc.error010());const A=e=>{const{defaultEdgeOptions:n,onConnect:t,hasDefaultEdges:o}=v.getState(),r={...n,...e};if(o){const{edges:e,setEdges:n}=v.getState();n((0,i.rN)(r,e))}t?.(r),u?.(r)},L=e=>{if(!w)return;const n=(0,i.Er)(e.nativeEvent);if(a&&(n&&0===e.button||!n)){const n=v.getState();i.aQ.onPointerDown(e.nativeEvent,{autoPanOnConnect:n.autoPanOnConnect,connectionMode:n.connectionMode,connectionRadius:n.connectionRadius,domNode:n.domNode,nodeLookup:n.nodeLookup,lib:n.lib,isTarget:x,handleId:C,nodeId:w,flowId:n.rfId,panBy:n.panBy,cancelConnection:n.cancelConnection,onConnectStart:n.onConnectStart,onConnectEnd:n.onConnectEnd,updateConnection:n.updateConnection,onConnect:A,isValidConnection:t||n.isValidConnection,getTransform:()=>v.getState().transform,getFromHandle:()=>v.getState().connection.fromHandle,autoPanSpeed:n.autoPanSpeed})}n?f?.(e):S?.(e)};return(0,o.jsx)("div",{"data-handleid":C,"data-nodeid":w,"data-handlepos":n,"data-id":`${N}-${w}-${C}-${e}`,className:(0,s.A)(["react-flow__handle",`react-flow__handle-${n}`,"nodrag",k,h,{source:!x,target:x,connectable:r,connectablestart:a,connectableend:l,clickconnecting:D,connectingfrom:M,connectingto:P,valid:I,connectionindicator:r&&(!R||O)&&(R?l:a)}]),onMouseDown:L,onTouchStart:L,onClick:E?n=>{const{onClickConnectStart:o,onClickConnectEnd:r,connectionClickStartHandle:s,connectionMode:d,isValidConnection:l,lib:c,rfId:u,nodeLookup:g,connection:p}=v.getState();if(!w||!s&&!a)return;if(!s)return o?.(n.nativeEvent,{nodeId:w,handleId:C,handleType:e}),void v.setState({connectionClickStartHandle:{nodeId:w,type:e,id:C}});const m=(0,i.oj)(n.target),h=t||l,{connection:f,isValid:S}=i.aQ.isValid(n.nativeEvent,{handle:{nodeId:w,id:C,type:e},connectionMode:d,fromNodeId:s.nodeId,fromHandleId:s.id||null,fromType:s.type,isValidConnection:h,flowId:u,doc:m,lib:c,nodeLookup:g});S&&f&&A(f);const y=structuredClone(p);delete y.inProgress,y.toPosition=y.toHandle?y.toHandle.position:null,r?.(n,y),v.setState({connectionClickStartHandle:null})}:void 0,ref:b,...y,children:m})})));const ve={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},we={input:function({data:e,isConnectable:n,sourcePosition:t=i.yX.Bottom}){return(0,o.jsxs)(o.Fragment,{children:[e?.label,(0,o.jsx)(xe,{type:"source",position:t,isConnectable:n})]})},default:function({data:e,isConnectable:n,targetPosition:t=i.yX.Top,sourcePosition:r=i.yX.Bottom}){return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(xe,{type:"target",position:t,isConnectable:n}),e?.label,(0,o.jsx)(xe,{type:"source",position:r,isConnectable:n})]})},output:function({data:e,isConnectable:n,targetPosition:t=i.yX.Top}){return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(xe,{type:"target",position:t,isConnectable:n}),e?.label]})},group:function(){return null}};const Ee=e=>{const{width:n,height:t,x:o,y:r}=(0,i.aZ)(e.nodeLookup,{filter:e=>!!e.selected});return{width:(0,i.kf)(n)?n:null,height:(0,i.kf)(t)?t:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${o}px,${r}px)`}};function ke({onSelectionContextMenu:e,noPanClassName:n,disableKeyboardA11y:t}){const i=p(),{width:a,height:l,transformString:c,userSelectionActive:u}=g(Ee,d.x),m=fe(),h=(0,r.useRef)(null);if((0,r.useEffect)((()=>{t||h.current?.focus({preventScroll:!0})}),[t]),he({nodeRef:h}),u||!a||!l)return null;const f=e?n=>{const t=i.getState().nodes.filter((e=>e.selected));e(n,t)}:void 0;return(0,o.jsx)("div",{className:(0,s.A)(["react-flow__nodesselection","react-flow__container",n]),style:{transform:c},children:(0,o.jsx)("div",{ref:h,className:"react-flow__nodesselection-rect",onContextMenu:f,tabIndex:t?void 0:-1,onKeyDown:t?void 0:e=>{Object.prototype.hasOwnProperty.call(ve,e.key)&&(e.preventDefault(),m({direction:ve[e.key],factor:e.shiftKey?4:1}))},style:{width:a,height:l}})})}const Ne="undefined"!=typeof window?window:void 0,Me=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function Pe({children:e,onPaneClick:n,onPaneMouseEnter:t,onPaneMouseMove:s,onPaneMouseLeave:i,onPaneContextMenu:a,onPaneScroll:d,paneClickDistance:l,deleteKeyCode:c,selectionKeyCode:u,selectionOnDrag:m,selectionMode:h,onSelectionStart:f,onSelectionEnd:S,multiSelectionKeyCode:y,panActivationKeyCode:b,zoomActivationKeyCode:C,elementsSelectable:x,zoomOnScroll:v,zoomOnPinch:w,panOnScroll:E,panOnScrollSpeed:k,panOnScrollMode:N,zoomOnDoubleClick:M,panOnDrag:P,defaultViewport:D,translateExtent:O,minZoom:R,maxZoom:I,preventScrolling:A,onSelectionContextMenu:L,noWheelClassName:j,noPanClassName:z,disableKeyboardA11y:_,onViewportChange:V,isControlledViewport:Z}){const{nodesSelectionActive:$,userSelectionActive:T}=g(Me),X=B(u,{target:Ne}),H=B(b,{target:Ne}),W=H||P,F=H||E,K=m&&!0!==W,Y=X||T||K;return function({deleteKeyCode:e,multiSelectionKeyCode:n}){const t=p(),{deleteElements:o}=te(),s=B(e,re),i=B(n,{target:se});(0,r.useEffect)((()=>{if(s){const{edges:e,nodes:n}=t.getState();o({nodes:n.filter(oe),edges:e.filter(oe)}),t.setState({nodesSelectionActive:!1})}}),[s]),(0,r.useEffect)((()=>{t.setState({multiSelectionActive:i})}),[i])}({deleteKeyCode:c,multiSelectionKeyCode:y}),(0,o.jsx)(de,{onPaneContextMenu:a,elementsSelectable:x,zoomOnScroll:v,zoomOnPinch:w,panOnScroll:F,panOnScrollSpeed:k,panOnScrollMode:N,zoomOnDoubleClick:M,panOnDrag:!X&&W,defaultViewport:D,translateExtent:O,minZoom:R,maxZoom:I,zoomActivationKeyCode:C,preventScrolling:A,noWheelClassName:j,noPanClassName:z,onViewportChange:V,isControlledViewport:Z,paneClickDistance:l,children:(0,o.jsxs)(pe,{onSelectionStart:f,onSelectionEnd:S,onPaneClick:n,onPaneMouseEnter:t,onPaneMouseMove:s,onPaneMouseLeave:i,onPaneContextMenu:a,onPaneScroll:d,panOnDrag:W,isSelecting:!!Y,selectionMode:h,selectionKeyPressed:X,selectionOnDrag:K,children:[e,$&&(0,o.jsx)(ke,{onSelectionContextMenu:L,noPanClassName:z,disableKeyboardA11y:_})]})})}Pe.displayName="FlowRenderer";const De=(0,r.memo)(Pe);function Oe(e){return g((0,r.useCallback)((e=>n=>e?(0,i.U$)(n.nodeLookup,{x:0,y:0,width:n.width,height:n.height},n.transform,!0).map((e=>e.id)):Array.from(n.nodeLookup.keys()))(e),[e]),d.x)}const Re=e=>e.updateNodeInternals;function Ie({id:e,onClick:n,onMouseEnter:t,onMouseMove:a,onMouseLeave:l,onContextMenu:c,onDoubleClick:u,nodesDraggable:m,elementsSelectable:h,nodesConnectable:S,nodesFocusable:y,resizeObserver:b,noDragClassName:C,noPanClassName:x,disableKeyboardA11y:v,rfId:w,nodeTypes:E,nodeClickDistance:k,onError:N}){const{node:M,internals:P,isParent:D}=g((n=>{const t=n.nodeLookup.get(e),o=n.parentLookup.has(e);return{node:t,internals:t.internals,isParent:o}}),d.x);let O=M.type||"default",R=E?.[O]||we[O];void 0===R&&(N?.("003",i.xc.error003(O)),O="default",R=we.default);const I=!!(M.draggable||m&&void 0===M.draggable),A=!!(M.selectable||h&&void 0===M.selectable),L=!!(M.connectable||S&&void 0===M.connectable),j=!!(M.focusable||y&&void 0===M.focusable),z=p(),_=(0,i.QE)(M),B=function({node:e,nodeType:n,hasDimensions:t,resizeObserver:o}){const s=p(),i=(0,r.useRef)(null),a=(0,r.useRef)(null),d=(0,r.useRef)(e.sourcePosition),l=(0,r.useRef)(e.targetPosition),c=(0,r.useRef)(n),u=t&&!!e.internals.handleBounds;return(0,r.useEffect)((()=>{!i.current||e.hidden||u&&a.current===i.current||(a.current&&o?.unobserve(a.current),o?.observe(i.current),a.current=i.current)}),[u,e.hidden]),(0,r.useEffect)((()=>()=>{a.current&&(o?.unobserve(a.current),a.current=null)}),[]),(0,r.useEffect)((()=>{if(i.current){const t=c.current!==n,o=d.current!==e.sourcePosition,r=l.current!==e.targetPosition;(t||o||r)&&(c.current=n,d.current=e.sourcePosition,l.current=e.targetPosition,s.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:i.current,force:!0}]])))}}),[e.id,n,e.sourcePosition,e.targetPosition]),i}({node:M,nodeType:O,hasDimensions:_,resizeObserver:b}),V=he({nodeRef:B,disabled:M.hidden||!I,noDragClassName:C,handleSelector:M.dragHandle,nodeId:e,isSelectable:A,nodeClickDistance:k}),Z=fe();if(M.hidden)return null;const $=(0,i.uD)(M),T=function(e){return void 0===e.internals.handleBounds?{width:e.width??e.initialWidth??e.style?.width,height:e.height??e.initialHeight??e.style?.height}:{width:e.width??e.style?.width,height:e.height??e.style?.height}}(M),X=A||I||n||t||a||l,H=t?e=>t(e,{...P.userNode}):void 0,W=a?e=>a(e,{...P.userNode}):void 0,F=l?e=>l(e,{...P.userNode}):void 0,K=c?e=>c(e,{...P.userNode}):void 0,Y=u?e=>u(e,{...P.userNode}):void 0;return(0,o.jsx)("div",{className:(0,s.A)(["react-flow__node",`react-flow__node-${O}`,{[x]:I},M.className,{selected:M.selected,selectable:A,parent:D,draggable:I,dragging:V}]),ref:B,style:{zIndex:P.z,transform:`translate(${P.positionAbsolute.x}px,${P.positionAbsolute.y}px)`,pointerEvents:X?"all":"none",visibility:_?"visible":"hidden",...M.style,...T},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:H,onMouseMove:W,onMouseLeave:F,onContextMenu:K,onClick:t=>{const{selectNodesOnDrag:o,nodeDragThreshold:r}=z.getState();A&&(!o||!I||r>0)&&me({id:e,store:z,nodeRef:B}),n&&n(t,{...P.userNode})},onDoubleClick:Y,onKeyDown:j?n=>{if(!(0,i.v5)(n.nativeEvent)&&!v)if(i.tn.includes(n.key)&&A){const t="Escape"===n.key;me({id:e,store:z,unselect:t,nodeRef:B})}else I&&M.selected&&Object.prototype.hasOwnProperty.call(ve,n.key)&&(n.preventDefault(),z.setState({ariaLiveMessage:`Moved selected node ${n.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~P.positionAbsolute.x}, y: ${~~P.positionAbsolute.y}`}),Z({direction:ve[n.key],factor:n.shiftKey?4:1}))}:void 0,tabIndex:j?0:void 0,role:j?"button":void 0,"aria-describedby":v?void 0:`${f}-${w}`,"aria-label":M.ariaLabel,children:(0,o.jsx)(ye,{value:e,children:(0,o.jsx)(R,{id:e,data:M.data,type:O,positionAbsoluteX:P.positionAbsolute.x,positionAbsoluteY:P.positionAbsolute.y,selected:M.selected??!1,selectable:A,draggable:I,deletable:M.deletable??!0,isConnectable:L,sourcePosition:M.sourcePosition,targetPosition:M.targetPosition,dragging:V,dragHandle:M.dragHandle,zIndex:P.z,parentId:M.parentId,...$})})})}const Ae=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function Le(e){const{nodesDraggable:n,nodesConnectable:t,nodesFocusable:s,elementsSelectable:i,onError:a}=g(Ae,d.x),l=Oe(e.onlyRenderVisibleElements),c=function(){const e=g(Re),[n]=(0,r.useState)((()=>"undefined"==typeof ResizeObserver?null:new ResizeObserver((n=>{const t=new Map;n.forEach((e=>{const n=e.target.getAttribute("data-id");t.set(n,{id:n,nodeElement:e.target,force:!0})})),e(t)}))));return(0,r.useEffect)((()=>()=>{n?.disconnect()}),[n]),n}();return(0,o.jsx)("div",{className:"react-flow__nodes",style:ie,children:l.map((r=>(0,o.jsx)(Ie,{id:r,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:c,nodesDraggable:n,nodesConnectable:t,nodesFocusable:s,elementsSelectable:i,nodeClickDistance:e.nodeClickDistance,onError:a},r)))})}Le.displayName="NodeRenderer";const je=(0,r.memo)(Le);const ze={[i.TG.Arrow]:({color:e="none",strokeWidth:n=1})=>(0,o.jsx)("polyline",{style:{stroke:e,strokeWidth:n},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),[i.TG.ArrowClosed]:({color:e="none",strokeWidth:n=1})=>(0,o.jsx)("polyline",{style:{stroke:e,fill:e,strokeWidth:n},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})};const _e=({id:e,type:n,color:t,width:s=12.5,height:a=12.5,markerUnits:d="strokeWidth",strokeWidth:l,orient:c="auto-start-reverse"})=>{const u=function(e){const n=p();return(0,r.useMemo)((()=>Object.prototype.hasOwnProperty.call(ze,e)?ze[e]:(n.getState().onError?.("009",i.xc.error009(e)),null)),[e])}(n);return u?(0,o.jsx)("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${s}`,markerHeight:`${a}`,viewBox:"-10 -10 20 20",markerUnits:d,orient:c,refX:"0",refY:"0",children:(0,o.jsx)(u,{color:t,strokeWidth:l})}):null},Be=({defaultColor:e,rfId:n})=>{const t=g((e=>e.edges)),s=g((e=>e.defaultEdgeOptions)),a=(0,r.useMemo)((()=>(0,i.Hm)(t,{id:n,defaultColor:e,defaultMarkerStart:s?.markerStart,defaultMarkerEnd:s?.markerEnd})),[t,s,n,e]);return a.length?(0,o.jsx)("svg",{className:"react-flow__marker",children:(0,o.jsx)("defs",{children:a.map((e=>(0,o.jsx)(_e,{id:e.id,type:e.type,color:e.color,width:e.width,height:e.height,markerUnits:e.markerUnits,strokeWidth:e.strokeWidth,orient:e.orient},e.id)))})}):null};Be.displayName="MarkerDefinitions";var Ve=(0,r.memo)(Be);function Ze({x:e,y:n,label:t,labelStyle:i={},labelShowBg:a=!0,labelBgStyle:d={},labelBgPadding:l=[2,4],labelBgBorderRadius:c=2,children:u,className:g,...p}){const[m,h]=(0,r.useState)({x:1,y:0,width:0,height:0}),f=(0,s.A)(["react-flow__edge-textwrapper",g]),S=(0,r.useRef)(null);return(0,r.useEffect)((()=>{if(S.current){const e=S.current.getBBox();h({x:e.x,y:e.y,width:e.width,height:e.height})}}),[t]),void 0!==t&&t?(0,o.jsxs)("g",{transform:`translate(${e-m.width/2} ${n-m.height/2})`,className:f,visibility:m.width?"visible":"hidden",...p,children:[a&&(0,o.jsx)("rect",{width:m.width+2*l[0],x:-l[0],y:-l[1],height:m.height+2*l[1],className:"react-flow__edge-textbg",style:d,rx:c,ry:c}),(0,o.jsx)("text",{className:"react-flow__edge-text",y:m.height/2,dy:"0.3em",ref:S,style:i,children:t}),u]}):null}Ze.displayName="EdgeText";const $e=(0,r.memo)(Ze);function Te({path:e,labelX:n,labelY:t,label:r,labelStyle:a,labelShowBg:d,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u,interactionWidth:g=20,...p}){return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{...p,d:e,fill:"none",className:(0,s.A)(["react-flow__edge-path",p.className])}),g&&(0,o.jsx)("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:g,className:"react-flow__edge-interaction"}),r&&(0,i.kf)(n)&&(0,i.kf)(t)?(0,o.jsx)($e,{x:n,y:t,label:r,labelStyle:a,labelShowBg:d,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u}):null]})}function Xe({pos:e,x1:n,y1:t,x2:o,y2:r}){return e===i.yX.Left||e===i.yX.Right?[.5*(n+o),t]:[n,.5*(t+r)]}function He({sourceX:e,sourceY:n,sourcePosition:t=i.yX.Bottom,targetX:o,targetY:r,targetPosition:s=i.yX.Top}){const[a,d]=Xe({pos:t,x1:e,y1:n,x2:o,y2:r}),[l,c]=Xe({pos:s,x1:o,y1:r,x2:e,y2:n}),[u,g,p,m]=(0,i.e_)({sourceX:e,sourceY:n,targetX:o,targetY:r,sourceControlX:a,sourceControlY:d,targetControlX:l,targetControlY:c});return[`M${e},${n} C${a},${d} ${l},${c} ${o},${r}`,u,g,p,m]}function We(e){return(0,r.memo)((({id:n,sourceX:t,sourceY:r,targetX:s,targetY:a,sourcePosition:d=i.yX.Bottom,targetPosition:l=i.yX.Top,label:c,labelStyle:u,labelShowBg:g,labelBgStyle:p,labelBgPadding:m,labelBgBorderRadius:h,style:f,markerEnd:S,markerStart:y,interactionWidth:b})=>{const[C,x,v]=He({sourceX:t,sourceY:r,sourcePosition:d,targetX:s,targetY:a,targetPosition:l}),w=e.isInternal?void 0:n;return(0,o.jsx)(Te,{id:w,path:C,labelX:x,labelY:v,label:c,labelStyle:u,labelShowBg:g,labelBgStyle:p,labelBgPadding:m,labelBgBorderRadius:h,style:f,markerEnd:S,markerStart:y,interactionWidth:b})}))}const Fe=We({isInternal:!1}),Ke=We({isInternal:!0});function Ye(e){return(0,r.memo)((({id:n,sourceX:t,sourceY:r,targetX:s,targetY:a,label:d,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:g,labelBgBorderRadius:p,style:m,sourcePosition:h=i.yX.Bottom,targetPosition:f=i.yX.Top,markerEnd:S,markerStart:y,pathOptions:b,interactionWidth:C})=>{const[x,v,w]=(0,i.oN)({sourceX:t,sourceY:r,sourcePosition:h,targetX:s,targetY:a,targetPosition:f,borderRadius:b?.borderRadius,offset:b?.offset}),E=e.isInternal?void 0:n;return(0,o.jsx)(Te,{id:E,path:x,labelX:v,labelY:w,label:d,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:g,labelBgBorderRadius:p,style:m,markerEnd:S,markerStart:y,interactionWidth:C})}))}Fe.displayName="SimpleBezierEdge",Ke.displayName="SimpleBezierEdgeInternal";const Ge=Ye({isInternal:!1}),Ue=Ye({isInternal:!0});function Qe(e){return(0,r.memo)((({id:n,...t})=>{const s=e.isInternal?void 0:n;return(0,o.jsx)(Ge,{...t,id:s,pathOptions:(0,r.useMemo)((()=>({borderRadius:0,offset:t.pathOptions?.offset})),[t.pathOptions?.offset])})}))}Ge.displayName="SmoothStepEdge",Ue.displayName="SmoothStepEdgeInternal";const qe=Qe({isInternal:!1}),Je=Qe({isInternal:!0});function en(e){return(0,r.memo)((({id:n,sourceX:t,sourceY:r,targetX:s,targetY:a,label:d,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:g,labelBgBorderRadius:p,style:m,markerEnd:h,markerStart:f,interactionWidth:S})=>{const[y,b,C]=(0,i.ah)({sourceX:t,sourceY:r,targetX:s,targetY:a}),x=e.isInternal?void 0:n;return(0,o.jsx)(Te,{id:x,path:y,labelX:b,labelY:C,label:d,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:g,labelBgBorderRadius:p,style:m,markerEnd:h,markerStart:f,interactionWidth:S})}))}qe.displayName="StepEdge",Je.displayName="StepEdgeInternal";const nn=en({isInternal:!1}),tn=en({isInternal:!0});function on(e){return(0,r.memo)((({id:n,sourceX:t,sourceY:r,targetX:s,targetY:a,sourcePosition:d=i.yX.Bottom,targetPosition:l=i.yX.Top,label:c,labelStyle:u,labelShowBg:g,labelBgStyle:p,labelBgPadding:m,labelBgBorderRadius:h,style:f,markerEnd:S,markerStart:y,pathOptions:b,interactionWidth:C})=>{const[x,v,w]=(0,i.Fp)({sourceX:t,sourceY:r,sourcePosition:d,targetX:s,targetY:a,targetPosition:l,curvature:b?.curvature}),E=e.isInternal?void 0:n;return(0,o.jsx)(Te,{id:E,path:x,labelX:v,labelY:w,label:c,labelStyle:u,labelShowBg:g,labelBgStyle:p,labelBgPadding:m,labelBgBorderRadius:h,style:f,markerEnd:S,markerStart:y,interactionWidth:C})}))}nn.displayName="StraightEdge",tn.displayName="StraightEdgeInternal";const rn=on({isInternal:!1}),sn=on({isInternal:!0});rn.displayName="BezierEdge",sn.displayName="BezierEdgeInternal";const an={default:sn,straight:tn,step:Je,smoothstep:Ue,simplebezier:Ke},dn={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},ln=(e,n,t)=>t===i.yX.Left?e-n:t===i.yX.Right?e+n:e,cn=(e,n,t)=>t===i.yX.Top?e-n:t===i.yX.Bottom?e+n:e,un="react-flow__edgeupdater";function gn({position:e,centerX:n,centerY:t,radius:r=10,onMouseDown:i,onMouseEnter:a,onMouseOut:d,type:l}){return(0,o.jsx)("circle",{onMouseDown:i,onMouseEnter:a,onMouseOut:d,className:(0,s.A)([un,`${un}-${l}`]),cx:ln(n,r,e),cy:cn(t,r,e),r:r,stroke:"transparent",fill:"transparent"})}function pn({isReconnectable:e,reconnectRadius:n,edge:t,sourceX:r,sourceY:s,targetX:a,targetY:d,sourcePosition:l,targetPosition:c,onReconnect:u,onReconnectStart:g,onReconnectEnd:m,setReconnecting:h,setUpdateHover:f}){const S=p(),y=(e,n)=>{if(0!==e.button)return;const{autoPanOnConnect:o,domNode:r,isValidConnection:s,connectionMode:a,connectionRadius:d,lib:l,onConnectStart:c,onConnectEnd:p,cancelConnection:f,nodeLookup:y,rfId:b,panBy:C,updateConnection:x}=S.getState(),v="target"===n.type;h(!0),g?.(e,t,n.type);i.aQ.onPointerDown(e.nativeEvent,{autoPanOnConnect:o,connectionMode:a,connectionRadius:d,domNode:r,handleId:n.id,nodeId:n.nodeId,nodeLookup:y,isTarget:v,edgeUpdaterType:n.type,lib:l,flowId:b,cancelConnection:f,panBy:C,isValidConnection:s,onConnect:e=>u?.(t,e),onConnectStart:c,onConnectEnd:p,onReconnectEnd:(e,o)=>{h(!1),m?.(e,t,n.type,o)},updateConnection:x,getTransform:()=>S.getState().transform,getFromHandle:()=>S.getState().connection.fromHandle})},b=()=>f(!0),C=()=>f(!1);return(0,o.jsxs)(o.Fragment,{children:[(!0===e||"source"===e)&&(0,o.jsx)(gn,{position:l,centerX:r,centerY:s,radius:n,onMouseDown:e=>y(e,{nodeId:t.target,id:t.targetHandle??null,type:"target"}),onMouseEnter:b,onMouseOut:C,type:"source"}),(!0===e||"target"===e)&&(0,o.jsx)(gn,{position:c,centerX:a,centerY:d,radius:n,onMouseDown:e=>y(e,{nodeId:t.source,id:t.sourceHandle??null,type:"source"}),onMouseEnter:b,onMouseOut:C,type:"target"})]})}function mn({id:e,edgesFocusable:n,edgesReconnectable:t,elementsSelectable:a,onClick:l,onDoubleClick:c,onContextMenu:u,onMouseEnter:m,onMouseMove:h,onMouseLeave:f,reconnectRadius:y,onReconnect:b,onReconnectStart:C,onReconnectEnd:x,rfId:v,edgeTypes:w,noPanClassName:E,onError:k,disableKeyboardA11y:N}){let M=g((n=>n.edgeLookup.get(e)));const P=g((e=>e.defaultEdgeOptions));M=P?{...P,...M}:M;let D=M.type||"default",O=w?.[D]||an[D];void 0===O&&(k?.("011",i.xc.error011(D)),D="default",O=an.default);const R=!!(M.focusable||n&&void 0===M.focusable),I=void 0!==b&&(M.reconnectable||t&&void 0===M.reconnectable),A=!!(M.selectable||a&&void 0===M.selectable),L=(0,r.useRef)(null),[j,z]=(0,r.useState)(!1),[_,B]=(0,r.useState)(!1),V=p(),{zIndex:Z,sourceX:$,sourceY:T,targetX:X,targetY:H,sourcePosition:W,targetPosition:F}=g((0,r.useCallback)((n=>{const t=n.nodeLookup.get(M.source),o=n.nodeLookup.get(M.target);if(!t||!o)return{zIndex:M.zIndex,...dn};const r=(0,i.b5)({id:e,sourceNode:t,targetNode:o,sourceHandle:M.sourceHandle||null,targetHandle:M.targetHandle||null,connectionMode:n.connectionMode,onError:k});return{zIndex:(0,i.qX)({selected:M.selected,zIndex:M.zIndex,sourceNode:t,targetNode:o,elevateOnSelect:n.elevateEdgesOnSelect}),...r||dn}}),[M.source,M.target,M.sourceHandle,M.targetHandle,M.selected,M.zIndex]),d.x),K=(0,r.useMemo)((()=>M.markerStart?`url('#${(0,i.aW)(M.markerStart,v)}')`:void 0),[M.markerStart,v]),Y=(0,r.useMemo)((()=>M.markerEnd?`url('#${(0,i.aW)(M.markerEnd,v)}')`:void 0),[M.markerEnd,v]);if(M.hidden||null===$||null===T||null===X||null===H)return null;const G=c?e=>{c(e,{...M})}:void 0,U=u?e=>{u(e,{...M})}:void 0,Q=m?e=>{m(e,{...M})}:void 0,q=h?e=>{h(e,{...M})}:void 0,J=f?e=>{f(e,{...M})}:void 0;return(0,o.jsx)("svg",{style:{zIndex:Z},children:(0,o.jsxs)("g",{className:(0,s.A)(["react-flow__edge",`react-flow__edge-${D}`,M.className,E,{selected:M.selected,animated:M.animated,inactive:!A&&!l,updating:j,selectable:A}]),onClick:n=>{const{addSelectedEdges:t,unselectNodesAndEdges:o,multiSelectionActive:r}=V.getState();A&&(V.setState({nodesSelectionActive:!1}),M.selected&&r?(o({nodes:[],edges:[M]}),L.current?.blur()):t([e])),l&&l(n,M)},onDoubleClick:G,onContextMenu:U,onMouseEnter:Q,onMouseMove:q,onMouseLeave:J,onKeyDown:R?n=>{if(!N&&i.tn.includes(n.key)&&A){const{unselectNodesAndEdges:t,addSelectedEdges:o}=V.getState();"Escape"===n.key?(L.current?.blur(),t({edges:[M]})):o([e])}}:void 0,tabIndex:R?0:void 0,role:R?"button":"img","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":null===M.ariaLabel?void 0:M.ariaLabel||`Edge from ${M.source} to ${M.target}`,"aria-describedby":R?`${S}-${v}`:void 0,ref:L,children:[!_&&(0,o.jsx)(O,{id:e,source:M.source,target:M.target,type:M.type,selected:M.selected,animated:M.animated,selectable:A,deletable:M.deletable??!0,label:M.label,labelStyle:M.labelStyle,labelShowBg:M.labelShowBg,labelBgStyle:M.labelBgStyle,labelBgPadding:M.labelBgPadding,labelBgBorderRadius:M.labelBgBorderRadius,sourceX:$,sourceY:T,targetX:X,targetY:H,sourcePosition:W,targetPosition:F,data:M.data,style:M.style,sourceHandleId:M.sourceHandle,targetHandleId:M.targetHandle,markerStart:K,markerEnd:Y,pathOptions:"pathOptions"in M?M.pathOptions:void 0,interactionWidth:M.interactionWidth}),I&&(0,o.jsx)(pn,{edge:M,isReconnectable:I,reconnectRadius:y,onReconnect:b,onReconnectStart:C,onReconnectEnd:x,sourceX:$,sourceY:T,targetX:X,targetY:H,sourcePosition:W,targetPosition:F,setUpdateHover:z,setReconnecting:B})]})})}const hn=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function fn({defaultMarkerColor:e,onlyRenderVisibleElements:n,rfId:t,edgeTypes:s,noPanClassName:a,onReconnect:l,onEdgeContextMenu:c,onEdgeMouseEnter:u,onEdgeMouseMove:p,onEdgeMouseLeave:m,onEdgeClick:h,reconnectRadius:f,onEdgeDoubleClick:S,onReconnectStart:y,onReconnectEnd:b,disableKeyboardA11y:C}){const{edgesFocusable:x,edgesReconnectable:v,elementsSelectable:w,onError:E}=g(hn,d.x),k=(N=n,g((0,r.useCallback)((e=>{if(!N)return e.edges.map((e=>e.id));const n=[];if(e.width&&e.height)for(const t of e.edges){const o=e.nodeLookup.get(t.source),r=e.nodeLookup.get(t.target);o&&r&&(0,i.uj)({sourceNode:o,targetNode:r,width:e.width,height:e.height,transform:e.transform})&&n.push(t.id)}return n}),[N]),d.x));var N;return(0,o.jsxs)("div",{className:"react-flow__edges",children:[(0,o.jsx)(Ve,{defaultColor:e,rfId:t}),k.map((e=>(0,o.jsx)(mn,{id:e,edgesFocusable:x,edgesReconnectable:v,elementsSelectable:w,noPanClassName:a,onReconnect:l,onContextMenu:c,onMouseEnter:u,onMouseMove:p,onMouseLeave:m,onClick:h,reconnectRadius:f,onDoubleClick:S,onReconnectStart:y,onReconnectEnd:b,rfId:t,onError:E,edgeTypes:s,disableKeyboardA11y:C},e)))]})}fn.displayName="EdgeRenderer";const Sn=(0,r.memo)(fn),yn=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function bn({children:e}){const n=g(yn);return(0,o.jsx)("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:n},children:e})}const Cn=e=>e.panZoom?.syncViewport;function xn(e){return e.connection.inProgress?{...e.connection,to:(0,i.Ff)(e.connection.to,e.transform)}:{...e.connection}}function vn(e){const n=function(e){if(e)return n=>{const t=xn(n);return e(t)};return xn}(e);return g(n,d.x)}const wn=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function En({containerStyle:e,style:n,type:t,component:r}){const{nodesConnectable:a,width:l,height:c,isValid:u,inProgress:p}=g(wn,d.x);return!!(l&&a&&p)?(0,o.jsx)("svg",{style:e,width:l,height:c,className:"react-flow__connectionline react-flow__container",children:(0,o.jsx)("g",{className:(0,s.A)(["react-flow__connection",(0,i.HF)(u)]),children:(0,o.jsx)(kn,{style:n,type:t,CustomComponent:r,isValid:u})})}):null}const kn=({style:e,type:n=i.Do.Bezier,CustomComponent:t,isValid:r})=>{const{inProgress:s,from:a,fromNode:d,fromHandle:l,fromPosition:c,to:u,toNode:g,toHandle:p,toPosition:m}=vn();if(!s)return;if(t)return(0,o.jsx)(t,{connectionLineType:n,connectionLineStyle:e,fromNode:d,fromHandle:l,fromX:a.x,fromY:a.y,toX:u.x,toY:u.y,fromPosition:c,toPosition:m,connectionStatus:(0,i.HF)(r),toNode:g,toHandle:p});let h="";const f={sourceX:a.x,sourceY:a.y,sourcePosition:c,targetX:u.x,targetY:u.y,targetPosition:m};switch(n){case i.Do.Bezier:[h]=(0,i.Fp)(f);break;case i.Do.SimpleBezier:[h]=He(f);break;case i.Do.Step:[h]=(0,i.oN)({...f,borderRadius:0});break;case i.Do.SmoothStep:[h]=(0,i.oN)(f);break;default:[h]=(0,i.ah)(f)}return(0,o.jsx)("path",{d:h,fill:"none",className:"react-flow__connection-path",style:e})};kn.displayName="ConnectionLine";const Nn={};function Mn(e=Nn){(0,r.useRef)(e),p();(0,r.useEffect)((()=>{0}),[e])}function Pn({nodeTypes:e,edgeTypes:n,onInit:t,onNodeClick:s,onEdgeClick:i,onNodeDoubleClick:a,onEdgeDoubleClick:d,onNodeMouseEnter:l,onNodeMouseMove:c,onNodeMouseLeave:u,onNodeContextMenu:m,onSelectionContextMenu:h,onSelectionStart:f,onSelectionEnd:S,connectionLineType:y,connectionLineStyle:b,connectionLineComponent:C,connectionLineContainerStyle:x,selectionKeyCode:v,selectionOnDrag:w,selectionMode:E,multiSelectionKeyCode:k,panActivationKeyCode:N,zoomActivationKeyCode:M,deleteKeyCode:P,onlyRenderVisibleElements:D,elementsSelectable:O,defaultViewport:R,translateExtent:I,minZoom:A,maxZoom:L,preventScrolling:j,defaultMarkerColor:z,zoomOnScroll:_,zoomOnPinch:B,panOnScroll:V,panOnScrollSpeed:Z,panOnScrollMode:$,zoomOnDoubleClick:T,panOnDrag:X,onPaneClick:H,onPaneMouseEnter:W,onPaneMouseMove:F,onPaneMouseLeave:K,onPaneScroll:Y,onPaneContextMenu:G,paneClickDistance:U,nodeClickDistance:Q,onEdgeContextMenu:q,onEdgeMouseEnter:J,onEdgeMouseMove:ee,onEdgeMouseLeave:ne,reconnectRadius:oe,onReconnect:re,onReconnectStart:se,onReconnectEnd:ie,noDragClassName:ae,noWheelClassName:de,noPanClassName:le,disableKeyboardA11y:ce,nodeExtent:ue,rfId:ge,viewport:pe,onViewportChange:me}){return Mn(e),Mn(n),p(),(0,r.useRef)(!1),(0,r.useEffect)((()=>{}),[]),function(e){const n=te(),t=(0,r.useRef)(!1);(0,r.useEffect)((()=>{!t.current&&n.viewportInitialized&&e&&(setTimeout((()=>e(n)),1),t.current=!0)}),[e,n.viewportInitialized])}(t),function(e){const n=g(Cn),t=p();(0,r.useEffect)((()=>{e&&(n?.(e),t.setState({transform:[e.x,e.y,e.zoom]}))}),[e,n])}(pe),(0,o.jsx)(De,{onPaneClick:H,onPaneMouseEnter:W,onPaneMouseMove:F,onPaneMouseLeave:K,onPaneContextMenu:G,onPaneScroll:Y,paneClickDistance:U,deleteKeyCode:P,selectionKeyCode:v,selectionOnDrag:w,selectionMode:E,onSelectionStart:f,onSelectionEnd:S,multiSelectionKeyCode:k,panActivationKeyCode:N,zoomActivationKeyCode:M,elementsSelectable:O,zoomOnScroll:_,zoomOnPinch:B,zoomOnDoubleClick:T,panOnScroll:V,panOnScrollSpeed:Z,panOnScrollMode:$,panOnDrag:X,defaultViewport:R,translateExtent:I,minZoom:A,maxZoom:L,onSelectionContextMenu:h,preventScrolling:j,noDragClassName:ae,noWheelClassName:de,noPanClassName:le,disableKeyboardA11y:ce,onViewportChange:me,isControlledViewport:!!pe,children:(0,o.jsxs)(bn,{children:[(0,o.jsx)(Sn,{edgeTypes:n,onEdgeClick:i,onEdgeDoubleClick:d,onReconnect:re,onReconnectStart:se,onReconnectEnd:ie,onlyRenderVisibleElements:D,onEdgeContextMenu:q,onEdgeMouseEnter:J,onEdgeMouseMove:ee,onEdgeMouseLeave:ne,reconnectRadius:oe,defaultMarkerColor:z,noPanClassName:le,disableKeyboardA11y:ce,rfId:ge}),(0,o.jsx)(En,{style:b,type:y,component:C,containerStyle:x}),(0,o.jsx)("div",{className:"react-flow__edgelabel-renderer"}),(0,o.jsx)(je,{nodeTypes:e,onNodeClick:s,onNodeDoubleClick:a,onNodeMouseEnter:l,onNodeMouseMove:c,onNodeMouseLeave:u,onNodeContextMenu:m,nodeClickDistance:Q,onlyRenderVisibleElements:D,noPanClassName:le,noDragClassName:ae,disableKeyboardA11y:ce,nodeExtent:ue,rfId:ge}),(0,o.jsx)("div",{className:"react-flow__viewport-portal"})]})})}Pn.displayName="GraphView";const Dn=(0,r.memo)(Pn),On=({nodes:e,edges:n,defaultNodes:t,defaultEdges:o,width:r,height:s,fitView:a,nodeOrigin:d,nodeExtent:l}={})=>{const c=new Map,u=new Map,g=new Map,p=new Map,m=o??n??[],h=t??e??[],f=d??[0,0],S=l??i.ZO;(0,i.qn)(g,p,m),(0,i.bi)(h,c,u,{nodeOrigin:f,nodeExtent:S,elevateNodesOnSelect:!1});let y=[0,0,1];if(a&&r&&s){const e=(0,i.aZ)(c,{filter:e=>!(!e.width&&!e.initialWidth||!e.height&&!e.initialHeight)}),{x:n,y:t,zoom:o}=(0,i.R4)(e,r,s,.5,2,.1);y=[n,t,o]}return{rfId:"1",width:0,height:0,transform:y,nodes:h,nodeLookup:c,parentLookup:u,edges:m,edgeLookup:p,connectionLookup:g,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:void 0!==t,hasDefaultEdges:void 0!==o,panZoom:null,minZoom:.5,maxZoom:2,translateExtent:i.ZO,nodeExtent:S,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:i.WZ.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:f,nodeDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,fitViewOnInit:!1,fitViewDone:!1,fitViewOnInitOptions:void 0,selectNodesOnDrag:!0,multiSelectionActive:!1,connection:{...i.bK},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanSpeed:15,connectionRadius:20,onError:i.KE,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1}};function Rn({initialNodes:e,initialEdges:n,defaultNodes:t,defaultEdges:s,initialWidth:d,initialHeight:l,fitView:u,nodeOrigin:g,nodeExtent:p,children:m}){const[h]=(0,r.useState)((()=>(({nodes:e,edges:n,defaultNodes:t,defaultEdges:o,width:r,height:s,fitView:d,nodeOrigin:l,nodeExtent:c})=>(0,a.h)(((a,u)=>({...On({nodes:e,edges:n,width:r,height:s,fitView:d,nodeOrigin:l,nodeExtent:c,defaultNodes:t,defaultEdges:o}),setNodes:e=>{const{nodeLookup:n,parentLookup:t,nodeOrigin:o,elevateNodesOnSelect:r}=u();(0,i.bi)(e,n,t,{nodeOrigin:o,nodeExtent:c,elevateNodesOnSelect:r,checkEquality:!0}),a({nodes:e})},setEdges:e=>{const{connectionLookup:n,edgeLookup:t}=u();(0,i.qn)(n,t,e),a({edges:e})},setDefaultNodesAndEdges:(e,n)=>{if(e){const{setNodes:n}=u();n(e),a({hasDefaultNodes:!0})}if(n){const{setEdges:e}=u();e(n),a({hasDefaultEdges:!0})}},updateNodeInternals:(e,n={triggerFitView:!0})=>{const{triggerNodeChanges:t,nodeLookup:o,parentLookup:r,fitViewOnInit:s,fitViewDone:d,fitViewOnInitOptions:l,domNode:c,nodeOrigin:g,nodeExtent:p,debug:m,fitViewSync:h}=u(),{changes:f,updatedInternals:S}=(0,i.uL)(e,o,r,c,g,p);if(S){if((0,i.vS)(o,r,{nodeOrigin:g,nodeExtent:p}),n.triggerFitView){let e=d;!d&&s&&(e=h({...l,nodes:l?.nodes})),a({fitViewDone:e})}else a({});f?.length>0&&(m&&console.log("React Flow: trigger node changes",f),t?.(f))}},updateNodePositions:(e,n=!1)=>{const t=[],o=[];for(const[r,s]of e){const e=!!(s?.expandParent&&s?.parentId&&s?.position),i={id:r,type:"position",position:e?{x:Math.max(0,s.position.x),y:Math.max(0,s.position.y)}:s.position,dragging:n};e&&t.push({id:r,parentId:s.parentId,rect:{...s.internals.positionAbsolute,width:s.measured.width,height:s.measured.height}}),o.push(i)}if(t.length>0){const{nodeLookup:e,parentLookup:n,nodeOrigin:r}=u(),s=(0,i.r8)(t,e,n,r);o.push(...s)}u().triggerNodeChanges(o)},triggerNodeChanges:e=>{const{onNodesChange:n,setNodes:t,nodes:o,hasDefaultNodes:r,debug:s}=u();e?.length&&(r&&t(X(e,o)),s&&console.log("React Flow: trigger node changes",e),n?.(e))},triggerEdgeChanges:e=>{const{onEdgesChange:n,setEdges:t,edges:o,hasDefaultEdges:r,debug:s}=u();e?.length&&(r&&t(H(e,o)),s&&console.log("React Flow: trigger edge changes",e),n?.(e))},addSelectedNodes:e=>{const{multiSelectionActive:n,edgeLookup:t,nodeLookup:o,triggerNodeChanges:r,triggerEdgeChanges:s}=u();n?r(e.map((e=>W(e,!0)))):(r(F(o,new Set([...e]),!0)),s(F(t)))},addSelectedEdges:e=>{const{multiSelectionActive:n,edgeLookup:t,nodeLookup:o,triggerNodeChanges:r,triggerEdgeChanges:s}=u();n?s(e.map((e=>W(e,!0)))):(s(F(t,new Set([...e]))),r(F(o,new Set,!0)))},unselectNodesAndEdges:({nodes:e,edges:n}={})=>{const{edges:t,nodes:o,nodeLookup:r,triggerNodeChanges:s,triggerEdgeChanges:i}=u(),a=n||t,d=(e||o).map((e=>{const n=r.get(e.id);return n&&(n.selected=!1),W(e.id,!1)})),l=a.map((e=>W(e.id,!1)));s(d),i(l)},setMinZoom:e=>{const{panZoom:n,maxZoom:t}=u();n?.setScaleExtent([e,t]),a({minZoom:e})},setMaxZoom:e=>{const{panZoom:n,minZoom:t}=u();n?.setScaleExtent([t,e]),a({maxZoom:e})},setTranslateExtent:e=>{u().panZoom?.setTranslateExtent(e),a({translateExtent:e})},setPaneClickDistance:e=>{u().panZoom?.setClickDistance(e)},resetSelectedElements:()=>{const{edges:e,nodes:n,triggerNodeChanges:t,triggerEdgeChanges:o}=u(),r=n.reduce(((e,n)=>n.selected?[...e,W(n.id,!1)]:e),[]),s=e.reduce(((e,n)=>n.selected?[...e,W(n.id,!1)]:e),[]);t(r),o(s)},setNodeExtent:e=>{const{nodes:n,nodeLookup:t,parentLookup:o,nodeOrigin:r,elevateNodesOnSelect:s,nodeExtent:d}=u();e[0][0]===d[0][0]&&e[0][1]===d[0][1]&&e[1][0]===d[1][0]&&e[1][1]===d[1][1]||((0,i.bi)(n,t,o,{nodeOrigin:r,nodeExtent:e,elevateNodesOnSelect:s,checkEquality:!1}),a({nodeExtent:e}))},panBy:e=>{const{transform:n,width:t,height:o,panZoom:r,translateExtent:s}=u();return(0,i.No)({delta:e,panZoom:r,transform:n,translateExtent:s,width:t,height:o})},fitView:e=>{const{panZoom:n,width:t,height:o,minZoom:r,maxZoom:s,nodeLookup:a}=u();if(!n)return Promise.resolve(!1);const d=(0,i.YV)(a,e);return(0,i.Pr)({nodes:d,width:t,height:o,panZoom:n,minZoom:r,maxZoom:s},e)},fitViewSync:e=>{const{panZoom:n,width:t,height:o,minZoom:r,maxZoom:s,nodeLookup:a}=u();if(!n)return!1;const d=(0,i.YV)(a,e);return(0,i.Pr)({nodes:d,width:t,height:o,panZoom:n,minZoom:r,maxZoom:s},e),d.size>0},cancelConnection:()=>{a({connection:{...i.bK}})},updateConnection:e=>{a({connection:e})},reset:()=>a({...On()})})),Object.is))({nodes:e,edges:n,defaultNodes:t,defaultEdges:s,width:d,height:l,fitView:u,nodeOrigin:g,nodeExtent:p})));return(0,o.jsx)(c,{value:h,children:(0,o.jsx)(ee,{children:m})})}function In({children:e,nodes:n,edges:t,defaultNodes:s,defaultEdges:i,width:a,height:d,fitView:c,nodeOrigin:u,nodeExtent:g}){return(0,r.useContext)(l)?(0,o.jsx)(o.Fragment,{children:e}):(0,o.jsx)(Rn,{initialNodes:n,initialEdges:t,defaultNodes:s,defaultEdges:i,initialWidth:a,initialHeight:d,fitView:c,nodeOrigin:u,nodeExtent:g,children:e})}const An={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};var Ln=U((function({nodes:e,edges:n,defaultNodes:t,defaultEdges:a,className:d,nodeTypes:l,edgeTypes:c,onNodeClick:u,onEdgeClick:g,onInit:p,onMove:m,onMoveStart:h,onMoveEnd:f,onConnect:S,onConnectStart:y,onConnectEnd:b,onClickConnectStart:x,onClickConnectEnd:v,onNodeMouseEnter:E,onNodeMouseMove:k,onNodeMouseLeave:N,onNodeContextMenu:M,onNodeDoubleClick:P,onNodeDragStart:I,onNodeDrag:A,onNodeDragStop:L,onNodesDelete:_,onEdgesDelete:B,onDelete:V,onSelectionChange:Z,onSelectionDragStart:$,onSelectionDrag:T,onSelectionDragStop:X,onSelectionContextMenu:H,onSelectionStart:W,onSelectionEnd:F,onBeforeDelete:K,connectionMode:Y,connectionLineType:G=i.Do.Bezier,connectionLineStyle:U,connectionLineComponent:Q,connectionLineContainerStyle:q,deleteKeyCode:J="Backspace",selectionKeyCode:ee="Shift",selectionOnDrag:ne=!1,selectionMode:te=i.Qc.Full,panActivationKeyCode:oe="Space",multiSelectionKeyCode:re=((0,i.Ue)()?"Meta":"Control"),zoomActivationKeyCode:se=((0,i.Ue)()?"Meta":"Control"),snapToGrid:ie,snapGrid:ae,onlyRenderVisibleElements:de=!1,selectNodesOnDrag:le,nodesDraggable:ce,nodesConnectable:ue,nodesFocusable:ge,nodeOrigin:pe=O,edgesFocusable:me,edgesReconnectable:he,elementsSelectable:fe=!0,defaultViewport:Se=R,minZoom:ye=.5,maxZoom:be=2,translateExtent:Ce=i.ZO,preventScrolling:xe=!0,nodeExtent:ve,defaultMarkerColor:we="#b1b1b7",zoomOnScroll:Ee=!0,zoomOnPinch:ke=!0,panOnScroll:Ne=!1,panOnScrollSpeed:Me=.5,panOnScrollMode:Pe=i.ny.Free,zoomOnDoubleClick:De=!0,panOnDrag:Oe=!0,onPaneClick:Re,onPaneMouseEnter:Ie,onPaneMouseMove:Ae,onPaneMouseLeave:Le,onPaneScroll:je,onPaneContextMenu:ze,paneClickDistance:_e=0,nodeClickDistance:Be=0,children:Ve,onReconnect:Ze,onReconnectStart:$e,onReconnectEnd:Te,onEdgeContextMenu:Xe,onEdgeDoubleClick:He,onEdgeMouseEnter:We,onEdgeMouseMove:Fe,onEdgeMouseLeave:Ke,reconnectRadius:Ye=10,onNodesChange:Ge,onEdgesChange:Ue,noDragClassName:Qe="nodrag",noWheelClassName:qe="nowheel",noPanClassName:Je="nopan",fitView:en,fitViewOptions:nn,connectOnClick:tn,attributionPosition:on,proOptions:rn,defaultEdgeOptions:sn,elevateNodesOnSelect:an,elevateEdgesOnSelect:dn,disableKeyboardA11y:ln=!1,autoPanOnConnect:cn,autoPanOnNodeDrag:un,autoPanSpeed:gn,connectionRadius:pn,isValidConnection:mn,onError:hn,style:fn,id:Sn,nodeDragThreshold:yn,viewport:bn,onViewportChange:Cn,width:xn,height:vn,colorMode:wn="light",debug:En,onScroll:kn,...Nn},Mn){const Pn=Sn||"1",On=function(e){const[n,t]=(0,r.useState)("system"===e?null:e);return(0,r.useEffect)((()=>{if("system"!==e)return void t(e);const n=z(),o=()=>t(n?.matches?"dark":"light");return o(),n?.addEventListener("change",o),()=>{n?.removeEventListener("change",o)}}),[e]),null!==n?n:z()?.matches?"dark":"light"}(wn),Rn=(0,r.useCallback)((e=>{e.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),kn?.(e)}),[kn]);return(0,o.jsx)("div",{"data-testid":"rf__wrapper",...Nn,onScroll:Rn,style:{...fn,...An},ref:Mn,className:(0,s.A)(["react-flow",d,On]),id:Sn,children:(0,o.jsxs)(In,{nodes:e,edges:n,width:xn,height:vn,fitView:en,nodeOrigin:pe,nodeExtent:ve,children:[(0,o.jsx)(Dn,{onInit:p,onNodeClick:u,onEdgeClick:g,onNodeMouseEnter:E,onNodeMouseMove:k,onNodeMouseLeave:N,onNodeContextMenu:M,onNodeDoubleClick:P,nodeTypes:l,edgeTypes:c,connectionLineType:G,connectionLineStyle:U,connectionLineComponent:Q,connectionLineContainerStyle:q,selectionKeyCode:ee,selectionOnDrag:ne,selectionMode:te,deleteKeyCode:J,multiSelectionKeyCode:re,panActivationKeyCode:oe,zoomActivationKeyCode:se,onlyRenderVisibleElements:de,defaultViewport:Se,translateExtent:Ce,minZoom:ye,maxZoom:be,preventScrolling:xe,zoomOnScroll:Ee,zoomOnPinch:ke,zoomOnDoubleClick:De,panOnScroll:Ne,panOnScrollSpeed:Me,panOnScrollMode:Pe,panOnDrag:Oe,onPaneClick:Re,onPaneMouseEnter:Ie,onPaneMouseMove:Ae,onPaneMouseLeave:Le,onPaneScroll:je,onPaneContextMenu:ze,paneClickDistance:_e,nodeClickDistance:Be,onSelectionContextMenu:H,onSelectionStart:W,onSelectionEnd:F,onReconnect:Ze,onReconnectStart:$e,onReconnectEnd:Te,onEdgeContextMenu:Xe,onEdgeDoubleClick:He,onEdgeMouseEnter:We,onEdgeMouseMove:Fe,onEdgeMouseLeave:Ke,reconnectRadius:Ye,defaultMarkerColor:we,noDragClassName:Qe,noWheelClassName:qe,noPanClassName:Je,rfId:Pn,disableKeyboardA11y:ln,nodeExtent:ve,viewport:bn,onViewportChange:Cn}),(0,o.jsx)(j,{nodes:e,edges:n,defaultNodes:t,defaultEdges:a,onConnect:S,onConnectStart:y,onConnectEnd:b,onClickConnectStart:x,onClickConnectEnd:v,nodesDraggable:ce,nodesConnectable:ue,nodesFocusable:ge,edgesFocusable:me,edgesReconnectable:he,elementsSelectable:fe,elevateNodesOnSelect:an,elevateEdgesOnSelect:dn,minZoom:ye,maxZoom:be,nodeExtent:ve,onNodesChange:Ge,onEdgesChange:Ue,snapToGrid:ie,snapGrid:ae,connectionMode:Y,translateExtent:Ce,connectOnClick:tn,defaultEdgeOptions:sn,fitView:en,fitViewOptions:nn,onNodesDelete:_,onEdgesDelete:B,onDelete:V,onNodeDragStart:I,onNodeDrag:A,onNodeDragStop:L,onSelectionDrag:T,onSelectionDragStart:$,onSelectionDragStop:X,onMove:m,onMoveStart:h,onMoveEnd:f,noPanClassName:Je,nodeOrigin:pe,rfId:Pn,autoPanOnConnect:cn,autoPanOnNodeDrag:un,autoPanSpeed:gn,onError:hn,connectionRadius:pn,isValidConnection:mn,selectNodesOnDrag:le,nodeDragThreshold:yn,onBeforeDelete:K,paneClickDistance:_e,debug:En}),(0,o.jsx)(D,{onSelectionChange:Z}),Ve,(0,o.jsx)(w,{proOptions:rn,position:on}),(0,o.jsx)(C,{rfId:Pn,disableKeyboardA11y:ln})]})})}));function jn(e){const[n,t]=(0,r.useState)(e),o=(0,r.useCallback)((e=>t((n=>X(e,n)))),[]);return[n,t,o]}function zn(e){const[n,t]=(0,r.useState)(e),o=(0,r.useCallback)((e=>t((n=>H(e,n)))),[]);return[n,t,o]}i.xc.error014();function _n({dimensions:e,lineWidth:n,variant:t,className:r}){return(0,o.jsx)("path",{strokeWidth:n,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:(0,s.A)(["react-flow__background-pattern",t,r])})}function Bn({radius:e,className:n}){return(0,o.jsx)("circle",{cx:e,cy:e,r:e,className:(0,s.A)(["react-flow__background-pattern","dots",n])})}var Vn;!function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"}(Vn||(Vn={}));const Zn={[Vn.Dots]:1,[Vn.Lines]:1,[Vn.Cross]:6},$n=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function Tn({id:e,variant:n=Vn.Dots,gap:t=20,size:i,lineWidth:a=1,offset:l=0,color:c,bgColor:u,style:p,className:m,patternClassName:h}){const f=(0,r.useRef)(null),{transform:S,patternId:y}=g($n,d.x),b=i||Zn[n],C=n===Vn.Dots,x=n===Vn.Cross,v=Array.isArray(t)?t:[t,t],w=[v[0]*S[2]||1,v[1]*S[2]||1],E=b*S[2],k=Array.isArray(l)?l:[l,l],N=x?[E,E]:w,M=[k[0]*S[2]||1+N[0]/2,k[1]*S[2]||1+N[1]/2],P=`${y}${e||""}`;return(0,o.jsxs)("svg",{className:(0,s.A)(["react-flow__background",m]),style:{...p,...ie,"--xy-background-color-props":u,"--xy-background-pattern-color-props":c},ref:f,"data-testid":"rf__background",children:[(0,o.jsx)("pattern",{id:P,x:S[0]%w[0],y:S[1]%w[1],width:w[0],height:w[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${M[0]},-${M[1]})`,children:C?(0,o.jsx)(Bn,{radius:E/2,className:h}):(0,o.jsx)(_n,{dimensions:N,lineWidth:a,variant:n,className:h})}),(0,o.jsx)("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${P})`})]})}Tn.displayName="Background";const Xn=(0,r.memo)(Tn);function Hn(){return(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:(0,o.jsx)("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function Wn(){return(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:(0,o.jsx)("path",{d:"M0 0h32v4.2H0z"})})}function Fn(){return(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:(0,o.jsx)("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function Kn(){return(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:(0,o.jsx)("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function Yn(){return(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:(0,o.jsx)("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function Gn({children:e,className:n,...t}){return(0,o.jsx)("button",{type:"button",className:(0,s.A)(["react-flow__controls-button",n]),...t,children:e})}const Un=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom});function Qn({style:e,showZoom:n=!0,showFitView:t=!0,showInteractive:r=!0,fitViewOptions:i,onZoomIn:a,onZoomOut:l,onFitView:c,onInteractiveChange:u,className:m,children:h,position:f="bottom-left",orientation:S="vertical","aria-label":y="React Flow controls"}){const b=p(),{isInteractive:C,minZoomReached:x,maxZoomReached:w}=g(Un,d.x),{zoomIn:E,zoomOut:k,fitView:N}=te(),M="horizontal"===S?"horizontal":"vertical";return(0,o.jsxs)(v,{className:(0,s.A)(["react-flow__controls",M,m]),position:f,style:e,"data-testid":"rf__controls","aria-label":y,children:[n&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Gn,{onClick:()=>{E(),a?.()},className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:w,children:(0,o.jsx)(Hn,{})}),(0,o.jsx)(Gn,{onClick:()=>{k(),l?.()},className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:x,children:(0,o.jsx)(Wn,{})})]}),t&&(0,o.jsx)(Gn,{className:"react-flow__controls-fitview",onClick:()=>{N(i),c?.()},title:"fit view","aria-label":"fit view",children:(0,o.jsx)(Fn,{})}),r&&(0,o.jsx)(Gn,{className:"react-flow__controls-interactive",onClick:()=>{b.setState({nodesDraggable:!C,nodesConnectable:!C,elementsSelectable:!C}),u?.(!C)},title:"toggle interactivity","aria-label":"toggle interactivity",children:C?(0,o.jsx)(Yn,{}):(0,o.jsx)(Kn,{})}),h]})}Qn.displayName="Controls";const qn=(0,r.memo)(Qn);const Jn=(0,r.memo)((function({id:e,x:n,y:t,width:r,height:i,style:a,color:d,strokeColor:l,strokeWidth:c,className:u,borderRadius:g,shapeRendering:p,selected:m,onClick:h}){const{background:f,backgroundColor:S}=a||{},y=d||f||S;return(0,o.jsx)("rect",{className:(0,s.A)(["react-flow__minimap-node",{selected:m},u]),x:n,y:t,rx:g,ry:g,width:r,height:i,style:{fill:y,stroke:l,strokeWidth:c},shapeRendering:p,onClick:h?n=>h(n,e):void 0})})),et=e=>e.nodes.map((e=>e.id)),nt=e=>e instanceof Function?e:()=>e;const tt=(0,r.memo)((function({id:e,nodeColorFunc:n,nodeStrokeColorFunc:t,nodeClassNameFunc:r,nodeBorderRadius:s,nodeStrokeWidth:a,shapeRendering:l,NodeComponent:c,onClick:u}){const{node:p,x:m,y:h,width:f,height:S}=g((n=>{const t=n.nodeLookup.get(e),{x:o,y:r}=t.internals.positionAbsolute,{width:s,height:a}=(0,i.uD)(t);return{node:t,x:o,y:r,width:s,height:a}}),d.x);return p&&!p.hidden&&(0,i.QE)(p)?(0,o.jsx)(c,{x:m,y:h,width:f,height:S,style:p.style,selected:!!p.selected,className:r(p),color:n(p),borderRadius:s,strokeColor:t(p),strokeWidth:a,shapeRendering:l,onClick:u,id:p.id}):null}));var ot=(0,r.memo)((function({nodeStrokeColor:e,nodeColor:n,nodeClassName:t="",nodeBorderRadius:r=5,nodeStrokeWidth:s,nodeComponent:i=Jn,onClick:a}){const l=g(et,d.x),c=nt(n),u=nt(e),p=nt(t),m="undefined"==typeof window||window.chrome?"crispEdges":"geometricPrecision";return(0,o.jsx)(o.Fragment,{children:l.map((e=>(0,o.jsx)(tt,{id:e,nodeColorFunc:c,nodeStrokeColorFunc:u,nodeClassNameFunc:p,nodeBorderRadius:r,nodeStrokeWidth:s,NodeComponent:i,onClick:a,shapeRendering:m},e)))})}));const rt=e=>{const n={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:n,boundingRect:e.nodeLookup.size>0?(0,i.Mi)((0,i.aZ)(e.nodeLookup),n):n,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height}};function st({style:e,className:n,nodeStrokeColor:t,nodeColor:a,nodeClassName:l="",nodeBorderRadius:c=5,nodeStrokeWidth:u,nodeComponent:m,bgColor:h,maskColor:f,maskStrokeColor:S,maskStrokeWidth:y,position:b="bottom-right",onClick:C,onNodeClick:x,pannable:w=!1,zoomable:E=!1,ariaLabel:k="React Flow mini map",inversePan:N,zoomStep:M=10,offsetScale:P=5}){const D=p(),O=(0,r.useRef)(null),{boundingRect:R,viewBB:I,rfId:A,panZoom:L,translateExtent:j,flowWidth:z,flowHeight:_}=g(rt,d.x),B=e?.width??200,V=e?.height??150,Z=R.width/B,$=R.height/V,T=Math.max(Z,$),X=T*B,H=T*V,W=P*T,F=R.x-(X-R.width)/2-W,K=R.y-(H-R.height)/2-W,Y=X+2*W,G=H+2*W,U=`react-flow__minimap-desc-${A}`,Q=(0,r.useRef)(0),q=(0,r.useRef)();Q.current=T,(0,r.useEffect)((()=>{if(O.current&&L)return q.current=(0,i.di)({domNode:O.current,panZoom:L,getTransform:()=>D.getState().transform,getViewScale:()=>Q.current}),()=>{q.current?.destroy()}}),[L]),(0,r.useEffect)((()=>{q.current?.update({translateExtent:j,width:z,height:_,inversePan:N,pannable:w,zoomStep:M,zoomable:E})}),[w,E,N,M,j,z,_]);const J=C?e=>{const[n,t]=q.current?.pointer(e)||[0,0];C(e,{x:n,y:t})}:void 0,ee=x?(0,r.useCallback)(((e,n)=>{const t=D.getState().nodeLookup.get(n);x(e,t)}),[]):void 0;return(0,o.jsx)(v,{position:b,style:{...e,"--xy-minimap-background-color-props":"string"==typeof h?h:void 0,"--xy-minimap-mask-background-color-props":"string"==typeof f?f:void 0,"--xy-minimap-mask-stroke-color-props":"string"==typeof S?S:void 0,"--xy-minimap-mask-stroke-width-props":"number"==typeof y?y*T:void 0,"--xy-minimap-node-background-color-props":"string"==typeof a?a:void 0,"--xy-minimap-node-stroke-color-props":"string"==typeof t?t:void 0,"--xy-minimap-node-stroke-width-props":"string"==typeof u?u:void 0},className:(0,s.A)(["react-flow__minimap",n]),"data-testid":"rf__minimap",children:(0,o.jsxs)("svg",{width:B,height:V,viewBox:`${F} ${K} ${Y} ${G}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":U,ref:O,onClick:J,children:[k&&(0,o.jsx)("title",{id:U,children:k}),(0,o.jsx)(ot,{onClick:ee,nodeColor:a,nodeStrokeColor:t,nodeBorderRadius:c,nodeClassName:l,nodeStrokeWidth:u,nodeComponent:m}),(0,o.jsx)("path",{className:"react-flow__minimap-mask",d:`M${F-W},${K-W}h${Y+2*W}v${G+2*W}h${-Y-2*W}z\n        M${I.x},${I.y}h${I.width}v${I.height}h${-I.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}st.displayName="MiniMap";(0,r.memo)(st);(0,r.memo)((function({nodeId:e,position:n,variant:t=i.xN.Handle,className:a,style:d={},children:l,color:c,minWidth:u=10,minHeight:g=10,maxWidth:m=Number.MAX_VALUE,maxHeight:h=Number.MAX_VALUE,keepAspectRatio:f=!1,shouldResize:S,onResizeStart:y,onResize:b,onResizeEnd:C}){const x=be(),v="string"==typeof e?e:x,w=p(),E=(0,r.useRef)(null),k=t===i.xN.Line?"right":"bottom-right",N=n??k,M=(0,r.useRef)(null);(0,r.useEffect)((()=>{if(E.current&&v)return M.current||(M.current=(0,i.ET)({domNode:E.current,nodeId:v,getStoreItems:()=>{const{nodeLookup:e,transform:n,snapGrid:t,snapToGrid:o,nodeOrigin:r,domNode:s}=w.getState();return{nodeLookup:e,transform:n,snapGrid:t,snapToGrid:o,nodeOrigin:r,paneDomNode:s}},onChange:(e,n)=>{const{triggerNodeChanges:t,nodeLookup:o,parentLookup:r,nodeOrigin:s}=w.getState(),a=[],d={x:e.x,y:e.y},l=o.get(v);if(l&&l.expandParent&&l.parentId){const n=l.origin??s,t=e.width??l.measured.width,c=e.height??l.measured.height,u={id:l.id,parentId:l.parentId,rect:{width:t,height:c,...(0,i.us)({x:e.x??l.position.x,y:e.y??l.position.y},{width:t,height:c},l.parentId,o,n)}},g=(0,i.r8)([u],o,r,s);a.push(...g),d.x=e.x?Math.max(n[0]*t,e.x):void 0,d.y=e.y?Math.max(n[1]*c,e.y):void 0}if(void 0!==d.x&&void 0!==d.y){const e={id:v,type:"position",position:{...d}};a.push(e)}if(void 0!==e.width&&void 0!==e.height){const n={id:v,type:"dimensions",resizing:!0,setAttributes:!0,dimensions:{width:e.width,height:e.height}};a.push(n)}for(const e of n){const n={...e,type:"position"};a.push(n)}t(a)},onEnd:()=>{const e={id:v,type:"dimensions",resizing:!1};w.getState().triggerNodeChanges([e])}})),M.current.update({controlPosition:N,boundaries:{minWidth:u,minHeight:g,maxWidth:m,maxHeight:h},keepAspectRatio:f,onResizeStart:y,onResize:b,onResizeEnd:C,shouldResize:S}),()=>{M.current?.destroy()}}),[N,u,g,m,h,f,y,b,C,S]);const P=N.split("-"),D=t===i.xN.Line?"borderColor":"backgroundColor",O=c?{...d,[D]:c}:d;return(0,o.jsx)("div",{className:(0,s.A)(["react-flow__resize-control","nodrag",...P,t,a]),ref:E,style:O,children:l})}))}}]);