"use strict";(self.webpackChunksme_dlsu=self.webpackChunksme_dlsu||[]).push([[1845],{1133:function(e,n,t){t.d(n,{Gc:function(){return In},H2:function(){return Un},VS:function(){return Tn},Zk:function(){return v},ck:function(){return An},fM:function(){return jn}});var o=t(4848),r=t(6540),i=t(6100),s=t(5154),a=t(2774),d=t(3402);t(961);const l=(0,r.createContext)(null),c=l.Provider,u=s.xc.error001();function g(e,n){const t=(0,r.useContext)(l);if(null===t)throw new Error(u);return(0,a.n)(t,e,n)}function p(){const e=(0,r.useContext)(l);if(null===e)throw new Error(u);return(0,r.useMemo)(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}const m={display:"none"},h={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},f="react-flow__node-desc",b="react-flow__edge-desc",y=e=>e.ariaLiveMessage,S=e=>e.ariaLabelConfig;function C({rfId:e}){const n=g(y);return(0,o.jsx)("div",{id:`react-flow__aria-live-${e}`,"aria-live":"assertive","aria-atomic":"true",style:h,children:n})}function x({rfId:e,disableKeyboardA11y:n}){const t=g(S);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{id:`${f}-${e}`,style:m,children:n?t["node.a11yDescription.default"]:t["node.a11yDescription.keyboardDisabled"]}),(0,o.jsx)("div",{id:`${b}-${e}`,style:m,children:t["edge.a11yDescription.default"]}),!n&&(0,o.jsx)(C,{rfId:e})]})}const v=(0,r.forwardRef)(({position:e="top-left",children:n,className:t,style:r,...s},a)=>{const d=`${e}`.split("-");return(0,o.jsx)("div",{className:(0,i.A)(["react-flow__panel",t,...d]),style:r,ref:a,...s,children:n})});function w({proOptions:e,position:n="bottom-right"}){return e?.hideAttribution?null:(0,o.jsx)(v,{position:n,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:(0,o.jsx)("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}v.displayName="Panel";const E=e=>{const n=[],t=[];for(const[,t]of e.nodeLookup)t.selected&&n.push(t.internals.userNode);for(const[,n]of e.edgeLookup)n.selected&&t.push(n);return{selectedNodes:n,selectedEdges:t}},k=e=>e.id;function N(e,n){return(0,d.x)(e.selectedNodes.map(k),n.selectedNodes.map(k))&&(0,d.x)(e.selectedEdges.map(k),n.selectedEdges.map(k))}function M({onSelectionChange:e}){const n=p(),{selectedNodes:t,selectedEdges:o}=g(E,N);return(0,r.useEffect)(()=>{const r={nodes:t,edges:o};e?.(r),n.getState().onSelectionChangeHandlers.forEach(e=>e(r))},[t,o,e]),null}const P=e=>!!e.onSelectionChangeHandlers;function O({onSelectionChange:e}){const n=g(P);return e||n?(0,o.jsx)(M,{onSelectionChange:e}):null}const D=[0,0],R={x:0,y:0,zoom:1},L=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","ariaLabelConfig","rfId"],I=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges}),A={translateExtent:s.ZO,nodeOrigin:D,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1"};function j(e){const{setNodes:n,setEdges:t,setMinZoom:o,setMaxZoom:i,setTranslateExtent:a,setNodeExtent:l,reset:c,setDefaultNodesAndEdges:u}=g(I,d.x),m=p();(0,r.useEffect)(()=>(u(e.defaultNodes,e.defaultEdges),()=>{h.current=A,c()}),[]);const h=(0,r.useRef)(A);return(0,r.useEffect)(()=>{for(const r of L){const d=e[r];d!==h.current[r]&&(void 0!==e[r]&&("nodes"===r?n(d):"edges"===r?t(d):"minZoom"===r?o(d):"maxZoom"===r?i(d):"translateExtent"===r?a(d):"nodeExtent"===r?l(d):"ariaLabelConfig"===r?m.setState({ariaLabelConfig:(0,s.Q6)(d)}):"fitView"===r?m.setState({fitViewQueued:d}):"fitViewOptions"===r?m.setState({fitViewOptions:d}):m.setState({[r]:d})))}h.current=e},L.map(n=>e[n])),null}function z(){return"undefined"!=typeof window&&window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)"):null}const _="undefined"!=typeof document?document:null;function B(e=null,n={target:_,actInsideInputWithModifier:!0}){const[t,o]=(0,r.useState)(!1),i=(0,r.useRef)(!1),a=(0,r.useRef)(new Set([])),[d,l]=(0,r.useMemo)(()=>{if(null!==e){const n=(Array.isArray(e)?e:[e]).filter(e=>"string"==typeof e).map(e=>e.replace("+","\n").replace("\n\n","\n+").split("\n")),t=n.reduce((e,n)=>e.concat(...n),[]);return[n,t]}return[[],[]]},[e]);return(0,r.useEffect)(()=>{const t=n?.target??_,r=n?.actInsideInputWithModifier??!0;if(null!==e){const e=e=>{i.current=e.ctrlKey||e.metaKey||e.shiftKey||e.altKey;if((!i.current||i.current&&!r)&&(0,s.v5)(e))return!1;const t=Z(e.code,l);if(a.current.add(e[t]),V(d,a.current,!1)){const t=e.composedPath?.()?.[0]||e.target,r="BUTTON"===t?.nodeName||"A"===t?.nodeName;!1===n.preventDefault||!i.current&&r||e.preventDefault(),o(!0)}},c=e=>{const n=Z(e.code,l);V(d,a.current,!0)?(o(!1),a.current.clear()):a.current.delete(e[n]),"Meta"===e.key&&a.current.clear(),i.current=!1},u=()=>{a.current.clear(),o(!1)};return t?.addEventListener("keydown",e),t?.addEventListener("keyup",c),window.addEventListener("blur",u),window.addEventListener("contextmenu",u),()=>{t?.removeEventListener("keydown",e),t?.removeEventListener("keyup",c),window.removeEventListener("blur",u),window.removeEventListener("contextmenu",u)}}},[e,o]),t}function V(e,n,t){return e.filter(e=>t||e.length===n.size).some(e=>e.every(e=>n.has(e)))}function Z(e,n){return n.includes(e)?"code":"key"}function $(e,n){const t=[],o=new Map,r=[];for(const n of e)if("add"!==n.type)if("remove"===n.type||"replace"===n.type)o.set(n.id,[n]);else{const e=o.get(n.id);e?e.push(n):o.set(n.id,[n])}else r.push(n);for(const e of n){const n=o.get(e.id);if(!n){t.push(e);continue}if("remove"===n[0].type)continue;if("replace"===n[0].type){t.push({...n[0].item});continue}const r={...e};for(const e of n)T(e,r);t.push(r)}return r.length&&r.forEach(e=>{void 0!==e.index?t.splice(e.index,0,{...e.item}):t.push({...e.item})}),t}function T(e,n){switch(e.type){case"select":n.selected=e.selected;break;case"position":void 0!==e.position&&(n.position=e.position),void 0!==e.dragging&&(n.dragging=e.dragging);break;case"dimensions":void 0!==e.dimensions&&(n.measured??={},n.measured.width=e.dimensions.width,n.measured.height=e.dimensions.height,e.setAttributes&&(!0!==e.setAttributes&&"width"!==e.setAttributes||(n.width=e.dimensions.width),!0!==e.setAttributes&&"height"!==e.setAttributes||(n.height=e.dimensions.height))),"boolean"==typeof e.resizing&&(n.resizing=e.resizing)}}function H(e,n){return $(e,n)}function X(e,n){return $(e,n)}function F(e,n){return{id:e,type:"select",selected:n}}function K(e,n=new Set,t=!1){const o=[];for(const[r,i]of e){const e=n.has(r);void 0===i.selected&&!e||i.selected===e||(t&&(i.selected=e),o.push(F(i.id,e)))}return o}function W({items:e=[],lookup:n}){const t=[],o=new Map(e.map(e=>[e.id,e]));for(const[o,r]of e.entries()){const e=n.get(r.id),i=e?.internals?.userNode??e;void 0!==i&&i!==r&&t.push({id:r.id,item:r,type:"replace"}),void 0===i&&t.push({item:r,type:"add",index:o})}for(const[e]of n){void 0===o.get(e)&&t.push({id:e,type:"remove"})}return t}function Y(e){return{id:e.id,type:"remove"}}const Q=e=>(0,s.oB)(e);function G(e){return(0,r.forwardRef)(e)}const U="undefined"!=typeof window?r.useLayoutEffect:r.useEffect;function q(e){const[n,t]=(0,r.useState)(BigInt(0)),[o]=(0,r.useState)(()=>function(e){let n=[];return{get:()=>n,reset:()=>{n=[]},push:t=>{n.push(t),e()}}}(()=>t(e=>e+BigInt(1))));return U(()=>{const n=o.get();n.length&&(e(n),o.reset())},[n]),o}const J=(0,r.createContext)(null);function ee({children:e}){const n=p(),t=q((0,r.useCallback)(e=>{const{nodes:t=[],setNodes:o,hasDefaultNodes:r,onNodesChange:i,nodeLookup:s,fitViewQueued:a}=n.getState();let d=t;for(const n of e)d="function"==typeof n?n(d):n;const l=W({items:d,lookup:s});r&&o(d),l.length>0?i?.(l):a&&window.requestAnimationFrame(()=>{const{fitViewQueued:e,nodes:t,setNodes:o}=n.getState();e&&o(t)})},[])),i=q((0,r.useCallback)(e=>{const{edges:t=[],setEdges:o,hasDefaultEdges:r,onEdgesChange:i,edgeLookup:s}=n.getState();let a=t;for(const n of e)a="function"==typeof n?n(a):n;r?o(a):i&&i(W({items:a,lookup:s}))},[])),s=(0,r.useMemo)(()=>({nodeQueue:t,edgeQueue:i}),[]);return(0,o.jsx)(J.Provider,{value:s,children:e})}const ne=e=>!!e.panZoom;function te(){const e=(()=>{const e=p();return(0,r.useMemo)(()=>({zoomIn:n=>{const{panZoom:t}=e.getState();return t?t.scaleBy(1.2,{duration:n?.duration}):Promise.resolve(!1)},zoomOut:n=>{const{panZoom:t}=e.getState();return t?t.scaleBy(1/1.2,{duration:n?.duration}):Promise.resolve(!1)},zoomTo:(n,t)=>{const{panZoom:o}=e.getState();return o?o.scaleTo(n,{duration:t?.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(n,t)=>{const{transform:[o,r,i],panZoom:s}=e.getState();return s?(await s.setViewport({x:n.x??o,y:n.y??r,zoom:n.zoom??i},t),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[n,t,o]=e.getState().transform;return{x:n,y:t,zoom:o}},setCenter:async(n,t,o)=>e.getState().setCenter(n,t,o),fitBounds:async(n,t)=>{const{width:o,height:r,minZoom:i,maxZoom:a,panZoom:d}=e.getState(),l=(0,s.R4)(n,o,r,i,a,t?.padding??.1);return d?(await d.setViewport(l,{duration:t?.duration,ease:t?.ease,interpolate:t?.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(n,t={})=>{const{transform:o,snapGrid:r,snapToGrid:i,domNode:a}=e.getState();if(!a)return n;const{x:d,y:l}=a.getBoundingClientRect(),c={x:n.x-d,y:n.y-l},u=t.snapGrid??r,g=t.snapToGrid??i;return(0,s.Ff)(c,o,g,u)},flowToScreenPosition:n=>{const{transform:t,domNode:o}=e.getState();if(!o)return n;const{x:r,y:i}=o.getBoundingClientRect(),a=(0,s.zj)(n,t);return{x:a.x+r,y:a.y+i}}}),[])})(),n=p(),t=function(){const e=(0,r.useContext)(J);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}(),o=g(ne),i=(0,r.useMemo)(()=>{const e=e=>n.getState().nodeLookup.get(e),o=e=>{t.nodeQueue.push(e)},r=e=>{t.edgeQueue.push(e)},i=e=>{const{nodeLookup:t,nodeOrigin:o}=n.getState(),r=Q(e)?e:t.get(e.id),i=r.parentId?(0,s.us)(r.position,r.measured,r.parentId,t,o):r.position,a={...r,position:i,width:r.measured?.width??r.width,height:r.measured?.height??r.height};return(0,s.kM)(a)},a=(e,n,t={replace:!1})=>{o(o=>o.map(o=>{if(o.id===e){const e="function"==typeof n?n(o):n;return t.replace&&Q(e)?e:{...o,...e}}return o}))},d=(e,n,t={replace:!1})=>{r(o=>o.map(o=>{if(o.id===e){const e="function"==typeof n?n(o):n;return t.replace&&(r=e,(0,s.b$)(r))?e:{...o,...e}}var r;return o}))};return{getNodes:()=>n.getState().nodes.map(e=>({...e})),getNode:n=>e(n)?.internals.userNode,getInternalNode:e,getEdges:()=>{const{edges:e=[]}=n.getState();return e.map(e=>({...e}))},getEdge:e=>n.getState().edgeLookup.get(e),setNodes:o,setEdges:r,addNodes:e=>{const n=Array.isArray(e)?e:[e];t.nodeQueue.push(e=>[...e,...n])},addEdges:e=>{const n=Array.isArray(e)?e:[e];t.edgeQueue.push(e=>[...e,...n])},toObject:()=>{const{nodes:e=[],edges:t=[],transform:o}=n.getState(),[r,i,s]=o;return{nodes:e.map(e=>({...e})),edges:t.map(e=>({...e})),viewport:{x:r,y:i,zoom:s}}},deleteElements:async({nodes:e=[],edges:t=[]})=>{const{nodes:o,edges:r,onNodesDelete:i,onEdgesDelete:a,triggerNodeChanges:d,triggerEdgeChanges:l,onDelete:c,onBeforeDelete:u}=n.getState(),{nodes:g,edges:p}=await(0,s.Tq)({nodesToRemove:e,edgesToRemove:t,nodes:o,edges:r,onBeforeDelete:u}),m=p.length>0,h=g.length>0;if(m){const e=p.map(Y);a?.(p),l(e)}if(h){const e=g.map(Y);i?.(g),d(e)}return(h||m)&&c?.({nodes:g,edges:p}),{deletedNodes:g,deletedEdges:p}},getIntersectingNodes:(e,t=!0,o)=>{const r=(0,s.mW)(e),a=r?e:i(e),d=void 0!==o;return a?(o||n.getState().nodes).filter(o=>{const i=n.getState().nodeLookup.get(o.id);if(i&&!r&&(o.id===e.id||!i.internals.positionAbsolute))return!1;const l=(0,s.kM)(d?o:i),c=(0,s.X6)(l,a);return t&&c>0||c>=l.width*l.height||c>=a.width*a.height}):[]},isNodeIntersecting:(e,n,t=!0)=>{const o=(0,s.mW)(e)?e:i(e);if(!o)return!1;const r=(0,s.X6)(o,n);return t&&r>0||r>=n.width*n.height||r>=o.width*o.height},updateNode:a,updateNodeData:(e,n,t={replace:!1})=>{a(e,e=>{const o="function"==typeof n?n(e):n;return t.replace?{...e,data:o}:{...e,data:{...e.data,...o}}},t)},updateEdge:d,updateEdgeData:(e,n,t={replace:!1})=>{d(e,e=>{const o="function"==typeof n?n(e):n;return t.replace?{...e,data:o}:{...e,data:{...e.data,...o}}},t)},getNodesBounds:e=>{const{nodeLookup:t,nodeOrigin:o}=n.getState();return(0,s.Jo)(e,{nodeLookup:t,nodeOrigin:o})},getHandleConnections:({type:e,id:t,nodeId:o})=>Array.from(n.getState().connectionLookup.get(`${o}-${e}${t?`-${t}`:""}`)?.values()??[]),getNodeConnections:({type:e,handleId:t,nodeId:o})=>Array.from(n.getState().connectionLookup.get(`${o}${e?t?`-${e}-${t}`:`-${e}`:""}`)?.values()??[]),fitView:async e=>{const o=n.getState().fitViewResolver??(0,s.YN)();return n.setState({fitViewQueued:!0,fitViewOptions:e,fitViewResolver:o}),t.nodeQueue.push(e=>[...e]),o.promise}}},[]);return(0,r.useMemo)(()=>({...i,...e,viewportInitialized:o}),[o])}const oe=e=>e.selected,re="undefined"!=typeof window?window:void 0;const ie={position:"absolute",width:"100%",height:"100%",top:0,left:0},se=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib,connectionInProgress:e.connection.inProgress});function ae({onPaneContextMenu:e,zoomOnScroll:n=!0,zoomOnPinch:t=!0,panOnScroll:i=!1,panOnScrollSpeed:a=.5,panOnScrollMode:l=s.ny.Free,zoomOnDoubleClick:c=!0,panOnDrag:u=!0,defaultViewport:m,translateExtent:h,minZoom:f,maxZoom:b,zoomActivationKeyCode:y,preventScrolling:S=!0,children:C,noWheelClassName:x,noPanClassName:v,onViewportChange:w,isControlledViewport:E,paneClickDistance:k,selectionOnDrag:N}){const M=p(),P=(0,r.useRef)(null),{userSelectionActive:O,lib:D,connectionInProgress:R}=g(se,d.x),L=B(y),I=(0,r.useRef)();!function(e){const n=p();(0,r.useEffect)(()=>{const t=()=>{if(!e.current||!(e.current.checkVisibility?.()??1))return!1;const t=(0,s.Eo)(e.current);0!==t.height&&0!==t.width||n.getState().onError?.("004",s.xc.error004()),n.setState({width:t.width||500,height:t.height||500})};if(e.current){t(),window.addEventListener("resize",t);const n=new ResizeObserver(()=>t());return n.observe(e.current),()=>{window.removeEventListener("resize",t),n&&e.current&&n.unobserve(e.current)}}},[])}(P);const A=(0,r.useCallback)(e=>{w?.({x:e[0],y:e[1],zoom:e[2]}),E||M.setState({transform:e})},[w,E]);return(0,r.useEffect)(()=>{if(P.current){I.current=(0,s.kO)({domNode:P.current,minZoom:f,maxZoom:b,translateExtent:h,viewport:m,onDraggingChange:e=>M.setState({paneDragging:e}),onPanZoomStart:(e,n)=>{const{onViewportChangeStart:t,onMoveStart:o}=M.getState();o?.(e,n),t?.(n)},onPanZoom:(e,n)=>{const{onViewportChange:t,onMove:o}=M.getState();o?.(e,n),t?.(n)},onPanZoomEnd:(e,n)=>{const{onViewportChangeEnd:t,onMoveEnd:o}=M.getState();o?.(e,n),t?.(n)}});const{x:e,y:n,zoom:t}=I.current.getViewport();return M.setState({panZoom:I.current,transform:[e,n,t],domNode:P.current.closest(".react-flow")}),()=>{I.current?.destroy()}}},[]),(0,r.useEffect)(()=>{I.current?.update({onPaneContextMenu:e,zoomOnScroll:n,zoomOnPinch:t,panOnScroll:i,panOnScrollSpeed:a,panOnScrollMode:l,zoomOnDoubleClick:c,panOnDrag:u,zoomActivationKeyPressed:L,preventScrolling:S,noPanClassName:v,userSelectionActive:O,noWheelClassName:x,lib:D,onTransformChange:A,connectionInProgress:R,selectionOnDrag:N,paneClickDistance:k})},[e,n,t,i,a,l,c,u,L,S,v,O,x,D,A,R,N,k]),(0,o.jsx)("div",{className:"react-flow__renderer",ref:P,style:ie,children:C})}const de=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function le(){const{userSelectionActive:e,userSelectionRect:n}=g(de,d.x);return e&&n?(0,o.jsx)("div",{className:"react-flow__selection react-flow__container",style:{width:n.width,height:n.height,transform:`translate(${n.x}px, ${n.y}px)`}}):null}const ce=(e,n)=>t=>{t.target===n.current&&e?.(t)},ue=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,connectionInProgress:e.connection.inProgress,dragging:e.paneDragging});function ge({isSelecting:e,selectionKeyPressed:n,selectionMode:t=s.Qc.Full,panOnDrag:a,paneClickDistance:l,selectionOnDrag:c,onSelectionStart:u,onSelectionEnd:m,onPaneClick:h,onPaneContextMenu:f,onPaneScroll:b,onPaneMouseEnter:y,onPaneMouseMove:S,onPaneMouseLeave:C,children:x}){const v=p(),{userSelectionActive:w,elementsSelectable:E,dragging:k,connectionInProgress:N}=g(ue,d.x),M=E&&(e||w),P=(0,r.useRef)(null),O=(0,r.useRef)(),D=(0,r.useRef)(new Set),R=(0,r.useRef)(new Set),L=(0,r.useRef)(!1),I=e=>{L.current||N?L.current=!1:(h?.(e),v.getState().resetSelectedElements(),v.setState({nodesSelectionActive:!1}))},A=b?e=>b(e):void 0,j=!0===a||Array.isArray(a)&&a.includes(0);return(0,o.jsxs)("div",{className:(0,i.A)(["react-flow__pane",{draggable:j,dragging:k,selection:e}]),onClick:M?void 0:ce(I,P),onContextMenu:ce(e=>{Array.isArray(a)&&a?.includes(2)?e.preventDefault():f?.(e)},P),onWheel:ce(A,P),onPointerEnter:M?void 0:y,onPointerMove:M?e=>{const{userSelectionRect:o,transform:r,nodeLookup:i,edgeLookup:a,connectionLookup:d,triggerNodeChanges:c,triggerEdgeChanges:g,defaultEdgeOptions:p,resetSelectedElements:m}=v.getState();if(!O.current||!o)return;const{x:h,y:f}=(0,s.q1)(e.nativeEvent,O.current),{startX:b,startY:y}=o;if(!L.current){const t=n?0:l;if(Math.hypot(h-b,f-y)<=t)return;m(),u?.(e)}L.current=!0;const S={startX:b,startY:y,x:h<b?h:b,y:f<y?f:y,width:Math.abs(h-b),height:Math.abs(f-y)},C=D.current,x=R.current;D.current=new Set((0,s.U$)(i,S,r,t===s.Qc.Partial,!0).map(e=>e.id)),R.current=new Set;const w=p?.selectable??!0;for(const e of D.current){const n=d.get(e);if(n)for(const{edgeId:e}of n.values()){const n=a.get(e);n&&(n.selectable??w)&&R.current.add(e)}}if(!(0,s._s)(C,D.current)){c(K(i,D.current,!0))}if(!(0,s._s)(x,R.current)){g(K(a,R.current))}v.setState({userSelectionRect:S,userSelectionActive:!0,nodesSelectionActive:!1})}:S,onPointerUp:M?e=>{0===e.button&&(e.target?.releasePointerCapture?.(e.pointerId),!w&&e.target===P.current&&v.getState().userSelectionRect&&I?.(e),v.setState({userSelectionActive:!1,userSelectionRect:null}),L.current&&(m?.(e),v.setState({nodesSelectionActive:D.current.size>0})))}:void 0,onPointerDownCapture:M?t=>{const{domNode:o}=v.getState();if(O.current=o?.getBoundingClientRect(),!O.current)return;const r=t.target===P.current;if(!r&&!!t.target.closest(".nokey")||!e||!(c&&r||n)||0!==t.button||!t.isPrimary)return;t.target?.setPointerCapture?.(t.pointerId),L.current=!1;const{x:i,y:a}=(0,s.q1)(t.nativeEvent,O.current);v.setState({userSelectionRect:{width:0,height:0,startX:i,startY:a,x:i,y:a}}),r||(t.stopPropagation(),t.preventDefault())}:void 0,onClickCapture:M?e=>{L.current&&(e.stopPropagation(),L.current=!1)}:void 0,onPointerLeave:C,ref:P,style:ie,children:[x,(0,o.jsx)(le,{})]})}function pe({id:e,store:n,unselect:t=!1,nodeRef:o}){const{addSelectedNodes:r,unselectNodesAndEdges:i,multiSelectionActive:a,nodeLookup:d,onError:l}=n.getState(),c=d.get(e);c?(n.setState({nodesSelectionActive:!1}),c.selected?(t||c.selected&&a)&&(i({nodes:[c],edges:[]}),requestAnimationFrame(()=>o?.current?.blur())):r([e])):l?.("012",s.xc.error012(e))}function me({nodeRef:e,disabled:n=!1,noDragClassName:t,handleSelector:o,nodeId:i,isSelectable:a,nodeClickDistance:d}){const l=p(),[c,u]=(0,r.useState)(!1),g=(0,r.useRef)();return(0,r.useEffect)(()=>{g.current=(0,s.I$)({getStoreItems:()=>l.getState(),onNodeMouseDown:n=>{pe({id:n,store:l,nodeRef:e})},onDragStart:()=>{u(!0)},onDragStop:()=>{u(!1)}})},[]),(0,r.useEffect)(()=>{if(n)g.current?.destroy();else if(e.current)return g.current?.update({noDragClassName:t,handleSelector:o,domNode:e.current,isSelectable:a,nodeId:i,nodeClickDistance:d}),()=>{g.current?.destroy()}},[t,o,n,a,e,i]),c}function he(){const e=p();return(0,r.useCallback)(n=>{const{nodeExtent:t,snapToGrid:o,snapGrid:r,nodesDraggable:i,onError:a,updateNodePositions:d,nodeLookup:l,nodeOrigin:c}=e.getState(),u=new Map,g=(e=>n=>n.selected&&(n.draggable||e&&void 0===n.draggable))(i),p=o?r[0]:5,m=o?r[1]:5,h=n.direction.x*p*n.factor,f=n.direction.y*m*n.factor;for(const[,e]of l){if(!g(e))continue;let n={x:e.internals.positionAbsolute.x+h,y:e.internals.positionAbsolute.y+f};o&&(n=(0,s.s_)(n,r));const{position:i,positionAbsolute:d}=(0,s.aE)({nodeId:e.id,nextPosition:n,nodeLookup:l,nodeExtent:t,nodeOrigin:c,onError:a});e.position=i,e.internals.positionAbsolute=d,u.set(e.id,e)}d(u)},[])}const fe=(0,r.createContext)(null),be=fe.Provider;fe.Consumer;const ye=()=>(0,r.useContext)(fe),Se=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId});const Ce=(0,r.memo)(G(function({type:e="source",position:n=s.yX.Top,isValidConnection:t,isConnectable:r=!0,isConnectableStart:a=!0,isConnectableEnd:l=!0,id:c,onConnect:u,children:m,className:h,onMouseDown:f,onTouchStart:b,...y},S){const C=c||null,x="target"===e,v=p(),w=ye(),{connectOnClick:E,noPanClassName:k,rfId:N}=g(Se,d.x),{connectingFrom:M,connectingTo:P,clickConnecting:O,isPossibleEndHandle:D,connectionInProcess:R,clickConnectionInProcess:L,valid:I}=g(((e,n,t)=>o=>{const{connectionClickStartHandle:r,connectionMode:i,connection:a}=o,{fromHandle:d,toHandle:l,isValid:c}=a,u=l?.nodeId===e&&l?.id===n&&l?.type===t;return{connectingFrom:d?.nodeId===e&&d?.id===n&&d?.type===t,connectingTo:u,clickConnecting:r?.nodeId===e&&r?.id===n&&r?.type===t,isPossibleEndHandle:i===s.WZ.Strict?d?.type!==t:e!==d?.nodeId||n!==d?.id,connectionInProcess:!!d,clickConnectionInProcess:!!r,valid:u&&c}})(w,C,e),d.x);w||v.getState().onError?.("010",s.xc.error010());const A=e=>{const{defaultEdgeOptions:n,onConnect:t,hasDefaultEdges:o}=v.getState(),r={...n,...e};if(o){const{edges:e,setEdges:n}=v.getState();n((0,s.rN)(r,e))}t?.(r),u?.(r)},j=e=>{if(!w)return;const n=(0,s.Er)(e.nativeEvent);if(a&&(n&&0===e.button||!n)){const n=v.getState();s.aQ.onPointerDown(e.nativeEvent,{handleDomNode:e.currentTarget,autoPanOnConnect:n.autoPanOnConnect,connectionMode:n.connectionMode,connectionRadius:n.connectionRadius,domNode:n.domNode,nodeLookup:n.nodeLookup,lib:n.lib,isTarget:x,handleId:C,nodeId:w,flowId:n.rfId,panBy:n.panBy,cancelConnection:n.cancelConnection,onConnectStart:n.onConnectStart,onConnectEnd:n.onConnectEnd,updateConnection:n.updateConnection,onConnect:A,isValidConnection:t||n.isValidConnection,getTransform:()=>v.getState().transform,getFromHandle:()=>v.getState().connection.fromHandle,autoPanSpeed:n.autoPanSpeed,dragThreshold:n.connectionDragThreshold})}n?f?.(e):b?.(e)};return(0,o.jsx)("div",{"data-handleid":C,"data-nodeid":w,"data-handlepos":n,"data-id":`${N}-${w}-${C}-${e}`,className:(0,i.A)(["react-flow__handle",`react-flow__handle-${n}`,"nodrag",k,h,{source:!x,target:x,connectable:r,connectablestart:a,connectableend:l,clickconnecting:O,connectingfrom:M,connectingto:P,valid:I,connectionindicator:r&&(!R||D)&&(R||L?l:a)}]),onMouseDown:j,onTouchStart:j,onClick:E?n=>{const{onClickConnectStart:o,onClickConnectEnd:r,connectionClickStartHandle:i,connectionMode:d,isValidConnection:l,lib:c,rfId:u,nodeLookup:g,connection:p}=v.getState();if(!w||!i&&!a)return;if(!i)return o?.(n.nativeEvent,{nodeId:w,handleId:C,handleType:e}),void v.setState({connectionClickStartHandle:{nodeId:w,type:e,id:C}});const m=(0,s.oj)(n.target),h=t||l,{connection:f,isValid:b}=s.aQ.isValid(n.nativeEvent,{handle:{nodeId:w,id:C,type:e},connectionMode:d,fromNodeId:i.nodeId,fromHandleId:i.id||null,fromType:i.type,isValidConnection:h,flowId:u,doc:m,lib:c,nodeLookup:g});b&&f&&A(f);const y=structuredClone(p);delete y.inProgress,y.toPosition=y.toHandle?y.toHandle.position:null,r?.(n,y),v.setState({connectionClickStartHandle:null})}:void 0,ref:S,...y,children:m})}));const xe={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},ve={input:function({data:e,isConnectable:n,sourcePosition:t=s.yX.Bottom}){return(0,o.jsxs)(o.Fragment,{children:[e?.label,(0,o.jsx)(Ce,{type:"source",position:t,isConnectable:n})]})},default:function({data:e,isConnectable:n,targetPosition:t=s.yX.Top,sourcePosition:r=s.yX.Bottom}){return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Ce,{type:"target",position:t,isConnectable:n}),e?.label,(0,o.jsx)(Ce,{type:"source",position:r,isConnectable:n})]})},output:function({data:e,isConnectable:n,targetPosition:t=s.yX.Top}){return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Ce,{type:"target",position:t,isConnectable:n}),e?.label]})},group:function(){return null}};const we=e=>{const{width:n,height:t,x:o,y:r}=(0,s.aZ)(e.nodeLookup,{filter:e=>!!e.selected});return{width:(0,s.kf)(n)?n:null,height:(0,s.kf)(t)?t:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${o}px,${r}px)`}};function Ee({onSelectionContextMenu:e,noPanClassName:n,disableKeyboardA11y:t}){const s=p(),{width:a,height:l,transformString:c,userSelectionActive:u}=g(we,d.x),m=he(),h=(0,r.useRef)(null);if((0,r.useEffect)(()=>{t||h.current?.focus({preventScroll:!0})},[t]),me({nodeRef:h}),u||!a||!l)return null;const f=e?n=>{const t=s.getState().nodes.filter(e=>e.selected);e(n,t)}:void 0;return(0,o.jsx)("div",{className:(0,i.A)(["react-flow__nodesselection","react-flow__container",n]),style:{transform:c},children:(0,o.jsx)("div",{ref:h,className:"react-flow__nodesselection-rect",onContextMenu:f,tabIndex:t?void 0:-1,onKeyDown:t?void 0:e=>{Object.prototype.hasOwnProperty.call(xe,e.key)&&(e.preventDefault(),m({direction:xe[e.key],factor:e.shiftKey?4:1}))},style:{width:a,height:l}})})}const ke="undefined"!=typeof window?window:void 0,Ne=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function Me({children:e,onPaneClick:n,onPaneMouseEnter:t,onPaneMouseMove:i,onPaneMouseLeave:s,onPaneContextMenu:a,onPaneScroll:d,paneClickDistance:l,deleteKeyCode:c,selectionKeyCode:u,selectionOnDrag:m,selectionMode:h,onSelectionStart:f,onSelectionEnd:b,multiSelectionKeyCode:y,panActivationKeyCode:S,zoomActivationKeyCode:C,elementsSelectable:x,zoomOnScroll:v,zoomOnPinch:w,panOnScroll:E,panOnScrollSpeed:k,panOnScrollMode:N,zoomOnDoubleClick:M,panOnDrag:P,defaultViewport:O,translateExtent:D,minZoom:R,maxZoom:L,preventScrolling:I,onSelectionContextMenu:A,noWheelClassName:j,noPanClassName:z,disableKeyboardA11y:_,onViewportChange:V,isControlledViewport:Z}){const{nodesSelectionActive:$,userSelectionActive:T}=g(Ne),H=B(u,{target:ke}),X=B(S,{target:ke}),F=X||P,K=X||E,W=m&&!0!==F,Y=H||T||W;return function({deleteKeyCode:e,multiSelectionKeyCode:n}){const t=p(),{deleteElements:o}=te(),i=B(e,{actInsideInputWithModifier:!1}),s=B(n,{target:re});(0,r.useEffect)(()=>{if(i){const{edges:e,nodes:n}=t.getState();o({nodes:n.filter(oe),edges:e.filter(oe)}),t.setState({nodesSelectionActive:!1})}},[i]),(0,r.useEffect)(()=>{t.setState({multiSelectionActive:s})},[s])}({deleteKeyCode:c,multiSelectionKeyCode:y}),(0,o.jsx)(ae,{onPaneContextMenu:a,elementsSelectable:x,zoomOnScroll:v,zoomOnPinch:w,panOnScroll:K,panOnScrollSpeed:k,panOnScrollMode:N,zoomOnDoubleClick:M,panOnDrag:!H&&F,defaultViewport:O,translateExtent:D,minZoom:R,maxZoom:L,zoomActivationKeyCode:C,preventScrolling:I,noWheelClassName:j,noPanClassName:z,onViewportChange:V,isControlledViewport:Z,paneClickDistance:l,selectionOnDrag:W,children:(0,o.jsxs)(ge,{onSelectionStart:f,onSelectionEnd:b,onPaneClick:n,onPaneMouseEnter:t,onPaneMouseMove:i,onPaneMouseLeave:s,onPaneContextMenu:a,onPaneScroll:d,panOnDrag:F,isSelecting:!!Y,selectionMode:h,selectionKeyPressed:H,paneClickDistance:l,selectionOnDrag:W,children:[e,$&&(0,o.jsx)(Ee,{onSelectionContextMenu:A,noPanClassName:z,disableKeyboardA11y:_})]})})}Me.displayName="FlowRenderer";const Pe=(0,r.memo)(Me);function Oe(e){return g((0,r.useCallback)((e=>n=>e?(0,s.U$)(n.nodeLookup,{x:0,y:0,width:n.width,height:n.height},n.transform,!0).map(e=>e.id):Array.from(n.nodeLookup.keys()))(e),[e]),d.x)}const De=e=>e.updateNodeInternals;var Re=(0,r.memo)(function({id:e,onClick:n,onMouseEnter:t,onMouseMove:a,onMouseLeave:l,onContextMenu:c,onDoubleClick:u,nodesDraggable:m,elementsSelectable:h,nodesConnectable:b,nodesFocusable:y,resizeObserver:S,noDragClassName:C,noPanClassName:x,disableKeyboardA11y:v,rfId:w,nodeTypes:E,nodeClickDistance:k,onError:N}){const{node:M,internals:P,isParent:O}=g(n=>{const t=n.nodeLookup.get(e),o=n.parentLookup.has(e);return{node:t,internals:t.internals,isParent:o}},d.x);let D=M.type||"default",R=E?.[D]||ve[D];void 0===R&&(N?.("003",s.xc.error003(D)),D="default",R=E?.default||ve.default);const L=!!(M.draggable||m&&void 0===M.draggable),I=!!(M.selectable||h&&void 0===M.selectable),A=!!(M.connectable||b&&void 0===M.connectable),j=!!(M.focusable||y&&void 0===M.focusable),z=p(),_=(0,s.QE)(M),B=function({node:e,nodeType:n,hasDimensions:t,resizeObserver:o}){const i=p(),s=(0,r.useRef)(null),a=(0,r.useRef)(null),d=(0,r.useRef)(e.sourcePosition),l=(0,r.useRef)(e.targetPosition),c=(0,r.useRef)(n),u=t&&!!e.internals.handleBounds;return(0,r.useEffect)(()=>{!s.current||e.hidden||u&&a.current===s.current||(a.current&&o?.unobserve(a.current),o?.observe(s.current),a.current=s.current)},[u,e.hidden]),(0,r.useEffect)(()=>()=>{a.current&&(o?.unobserve(a.current),a.current=null)},[]),(0,r.useEffect)(()=>{if(s.current){const t=c.current!==n,o=d.current!==e.sourcePosition,r=l.current!==e.targetPosition;(t||o||r)&&(c.current=n,d.current=e.sourcePosition,l.current=e.targetPosition,i.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:s.current,force:!0}]])))}},[e.id,n,e.sourcePosition,e.targetPosition]),s}({node:M,nodeType:D,hasDimensions:_,resizeObserver:S}),V=me({nodeRef:B,disabled:M.hidden||!L,noDragClassName:C,handleSelector:M.dragHandle,nodeId:e,isSelectable:I,nodeClickDistance:k}),Z=he();if(M.hidden)return null;const $=(0,s.uD)(M),T=function(e){return void 0===e.internals.handleBounds?{width:e.width??e.initialWidth??e.style?.width,height:e.height??e.initialHeight??e.style?.height}:{width:e.width??e.style?.width,height:e.height??e.style?.height}}(M),H=I||L||n||t||a||l,X=t?e=>t(e,{...P.userNode}):void 0,F=a?e=>a(e,{...P.userNode}):void 0,K=l?e=>l(e,{...P.userNode}):void 0,W=c?e=>c(e,{...P.userNode}):void 0,Y=u?e=>u(e,{...P.userNode}):void 0;return(0,o.jsx)("div",{className:(0,i.A)(["react-flow__node",`react-flow__node-${D}`,{[x]:L},M.className,{selected:M.selected,selectable:I,parent:O,draggable:L,dragging:V}]),ref:B,style:{zIndex:P.z,transform:`translate(${P.positionAbsolute.x}px,${P.positionAbsolute.y}px)`,pointerEvents:H?"all":"none",visibility:_?"visible":"hidden",...M.style,...T},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:X,onMouseMove:F,onMouseLeave:K,onContextMenu:W,onClick:t=>{const{selectNodesOnDrag:o,nodeDragThreshold:r}=z.getState();I&&(!o||!L||r>0)&&pe({id:e,store:z,nodeRef:B}),n&&n(t,{...P.userNode})},onDoubleClick:Y,onKeyDown:j?n=>{if(!(0,s.v5)(n.nativeEvent)&&!v)if(s.tn.includes(n.key)&&I){const t="Escape"===n.key;pe({id:e,store:z,unselect:t,nodeRef:B})}else if(L&&M.selected&&Object.prototype.hasOwnProperty.call(xe,n.key)){n.preventDefault();const{ariaLabelConfig:e}=z.getState();z.setState({ariaLiveMessage:e["node.a11yDescription.ariaLiveMessage"]({direction:n.key.replace("Arrow","").toLowerCase(),x:~~P.positionAbsolute.x,y:~~P.positionAbsolute.y})}),Z({direction:xe[n.key],factor:n.shiftKey?4:1})}}:void 0,tabIndex:j?0:void 0,onFocus:j?()=>{if(v||!B.current?.matches(":focus-visible"))return;const{transform:n,width:t,height:o,autoPanOnNodeFocus:r,setCenter:i}=z.getState();if(!r)return;(0,s.U$)(new Map([[e,M]]),{x:0,y:0,width:t,height:o},n,!0).length>0||i(M.position.x+$.width/2,M.position.y+$.height/2,{zoom:n[2]})}:void 0,role:M.ariaRole??(j?"group":void 0),"aria-roledescription":"node","aria-describedby":v?void 0:`${f}-${w}`,"aria-label":M.ariaLabel,...M.domAttributes,children:(0,o.jsx)(be,{value:e,children:(0,o.jsx)(R,{id:e,data:M.data,type:D,positionAbsoluteX:P.positionAbsolute.x,positionAbsoluteY:P.positionAbsolute.y,selected:M.selected??!1,selectable:I,draggable:L,deletable:M.deletable??!0,isConnectable:A,sourcePosition:M.sourcePosition,targetPosition:M.targetPosition,dragging:V,dragHandle:M.dragHandle,zIndex:P.z,parentId:M.parentId,...$})})})});const Le=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function Ie(e){const{nodesDraggable:n,nodesConnectable:t,nodesFocusable:i,elementsSelectable:s,onError:a}=g(Le,d.x),l=Oe(e.onlyRenderVisibleElements),c=function(){const e=g(De),[n]=(0,r.useState)(()=>"undefined"==typeof ResizeObserver?null:new ResizeObserver(n=>{const t=new Map;n.forEach(e=>{const n=e.target.getAttribute("data-id");t.set(n,{id:n,nodeElement:e.target,force:!0})}),e(t)}));return(0,r.useEffect)(()=>()=>{n?.disconnect()},[n]),n}();return(0,o.jsx)("div",{className:"react-flow__nodes",style:ie,children:l.map(r=>(0,o.jsx)(Re,{id:r,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:c,nodesDraggable:n,nodesConnectable:t,nodesFocusable:i,elementsSelectable:s,nodeClickDistance:e.nodeClickDistance,onError:a},r))})}Ie.displayName="NodeRenderer";const Ae=(0,r.memo)(Ie);const je={[s.TG.Arrow]:({color:e="none",strokeWidth:n=1})=>{const t={strokeWidth:n,...e&&{stroke:e}};return(0,o.jsx)("polyline",{className:"arrow",style:t,strokeLinecap:"round",fill:"none",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4"})},[s.TG.ArrowClosed]:({color:e="none",strokeWidth:n=1})=>{const t={strokeWidth:n,...e&&{stroke:e,fill:e}};return(0,o.jsx)("polyline",{className:"arrowclosed",style:t,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})}};const ze=({id:e,type:n,color:t,width:i=12.5,height:a=12.5,markerUnits:d="strokeWidth",strokeWidth:l,orient:c="auto-start-reverse"})=>{const u=function(e){const n=p();return(0,r.useMemo)(()=>Object.prototype.hasOwnProperty.call(je,e)?je[e]:(n.getState().onError?.("009",s.xc.error009(e)),null),[e])}(n);return u?(0,o.jsx)("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${i}`,markerHeight:`${a}`,viewBox:"-10 -10 20 20",markerUnits:d,orient:c,refX:"0",refY:"0",children:(0,o.jsx)(u,{color:t,strokeWidth:l})}):null},_e=({defaultColor:e,rfId:n})=>{const t=g(e=>e.edges),i=g(e=>e.defaultEdgeOptions),a=(0,r.useMemo)(()=>(0,s.Hm)(t,{id:n,defaultColor:e,defaultMarkerStart:i?.markerStart,defaultMarkerEnd:i?.markerEnd}),[t,i,n,e]);return a.length?(0,o.jsx)("svg",{className:"react-flow__marker","aria-hidden":"true",children:(0,o.jsx)("defs",{children:a.map(e=>(0,o.jsx)(ze,{id:e.id,type:e.type,color:e.color,width:e.width,height:e.height,markerUnits:e.markerUnits,strokeWidth:e.strokeWidth,orient:e.orient},e.id))})}):null};_e.displayName="MarkerDefinitions";var Be=(0,r.memo)(_e);function Ve({x:e,y:n,label:t,labelStyle:s,labelShowBg:a=!0,labelBgStyle:d,labelBgPadding:l=[2,4],labelBgBorderRadius:c=2,children:u,className:g,...p}){const[m,h]=(0,r.useState)({x:1,y:0,width:0,height:0}),f=(0,i.A)(["react-flow__edge-textwrapper",g]),b=(0,r.useRef)(null);return(0,r.useEffect)(()=>{if(b.current){const e=b.current.getBBox();h({x:e.x,y:e.y,width:e.width,height:e.height})}},[t]),t?(0,o.jsxs)("g",{transform:`translate(${e-m.width/2} ${n-m.height/2})`,className:f,visibility:m.width?"visible":"hidden",...p,children:[a&&(0,o.jsx)("rect",{width:m.width+2*l[0],x:-l[0],y:-l[1],height:m.height+2*l[1],className:"react-flow__edge-textbg",style:d,rx:c,ry:c}),(0,o.jsx)("text",{className:"react-flow__edge-text",y:m.height/2,dy:"0.3em",ref:b,style:s,children:t}),u]}):null}Ve.displayName="EdgeText";const Ze=(0,r.memo)(Ve);function $e({path:e,labelX:n,labelY:t,label:r,labelStyle:a,labelShowBg:d,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u,interactionWidth:g=20,...p}){return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{...p,d:e,fill:"none",className:(0,i.A)(["react-flow__edge-path",p.className])}),g?(0,o.jsx)("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:g,className:"react-flow__edge-interaction"}):null,r&&(0,s.kf)(n)&&(0,s.kf)(t)?(0,o.jsx)(Ze,{x:n,y:t,label:r,labelStyle:a,labelShowBg:d,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:u}):null]})}function Te({pos:e,x1:n,y1:t,x2:o,y2:r}){return e===s.yX.Left||e===s.yX.Right?[.5*(n+o),t]:[n,.5*(t+r)]}function He({sourceX:e,sourceY:n,sourcePosition:t=s.yX.Bottom,targetX:o,targetY:r,targetPosition:i=s.yX.Top}){const[a,d]=Te({pos:t,x1:e,y1:n,x2:o,y2:r}),[l,c]=Te({pos:i,x1:o,y1:r,x2:e,y2:n}),[u,g,p,m]=(0,s.e_)({sourceX:e,sourceY:n,targetX:o,targetY:r,sourceControlX:a,sourceControlY:d,targetControlX:l,targetControlY:c});return[`M${e},${n} C${a},${d} ${l},${c} ${o},${r}`,u,g,p,m]}function Xe(e){return(0,r.memo)(({id:n,sourceX:t,sourceY:r,targetX:i,targetY:s,sourcePosition:a,targetPosition:d,label:l,labelStyle:c,labelShowBg:u,labelBgStyle:g,labelBgPadding:p,labelBgBorderRadius:m,style:h,markerEnd:f,markerStart:b,interactionWidth:y})=>{const[S,C,x]=He({sourceX:t,sourceY:r,sourcePosition:a,targetX:i,targetY:s,targetPosition:d}),v=e.isInternal?void 0:n;return(0,o.jsx)($e,{id:v,path:S,labelX:C,labelY:x,label:l,labelStyle:c,labelShowBg:u,labelBgStyle:g,labelBgPadding:p,labelBgBorderRadius:m,style:h,markerEnd:f,markerStart:b,interactionWidth:y})})}const Fe=Xe({isInternal:!1}),Ke=Xe({isInternal:!0});function We(e){return(0,r.memo)(({id:n,sourceX:t,sourceY:r,targetX:i,targetY:a,label:d,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:g,labelBgBorderRadius:p,style:m,sourcePosition:h=s.yX.Bottom,targetPosition:f=s.yX.Top,markerEnd:b,markerStart:y,pathOptions:S,interactionWidth:C})=>{const[x,v,w]=(0,s.oN)({sourceX:t,sourceY:r,sourcePosition:h,targetX:i,targetY:a,targetPosition:f,borderRadius:S?.borderRadius,offset:S?.offset,stepPosition:S?.stepPosition}),E=e.isInternal?void 0:n;return(0,o.jsx)($e,{id:E,path:x,labelX:v,labelY:w,label:d,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:g,labelBgBorderRadius:p,style:m,markerEnd:b,markerStart:y,interactionWidth:C})})}Fe.displayName="SimpleBezierEdge",Ke.displayName="SimpleBezierEdgeInternal";const Ye=We({isInternal:!1}),Qe=We({isInternal:!0});function Ge(e){return(0,r.memo)(({id:n,...t})=>{const i=e.isInternal?void 0:n;return(0,o.jsx)(Ye,{...t,id:i,pathOptions:(0,r.useMemo)(()=>({borderRadius:0,offset:t.pathOptions?.offset}),[t.pathOptions?.offset])})})}Ye.displayName="SmoothStepEdge",Qe.displayName="SmoothStepEdgeInternal";const Ue=Ge({isInternal:!1}),qe=Ge({isInternal:!0});function Je(e){return(0,r.memo)(({id:n,sourceX:t,sourceY:r,targetX:i,targetY:a,label:d,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:g,labelBgBorderRadius:p,style:m,markerEnd:h,markerStart:f,interactionWidth:b})=>{const[y,S,C]=(0,s.ah)({sourceX:t,sourceY:r,targetX:i,targetY:a}),x=e.isInternal?void 0:n;return(0,o.jsx)($e,{id:x,path:y,labelX:S,labelY:C,label:d,labelStyle:l,labelShowBg:c,labelBgStyle:u,labelBgPadding:g,labelBgBorderRadius:p,style:m,markerEnd:h,markerStart:f,interactionWidth:b})})}Ue.displayName="StepEdge",qe.displayName="StepEdgeInternal";const en=Je({isInternal:!1}),nn=Je({isInternal:!0});function tn(e){return(0,r.memo)(({id:n,sourceX:t,sourceY:r,targetX:i,targetY:a,sourcePosition:d=s.yX.Bottom,targetPosition:l=s.yX.Top,label:c,labelStyle:u,labelShowBg:g,labelBgStyle:p,labelBgPadding:m,labelBgBorderRadius:h,style:f,markerEnd:b,markerStart:y,pathOptions:S,interactionWidth:C})=>{const[x,v,w]=(0,s.Fp)({sourceX:t,sourceY:r,sourcePosition:d,targetX:i,targetY:a,targetPosition:l,curvature:S?.curvature}),E=e.isInternal?void 0:n;return(0,o.jsx)($e,{id:E,path:x,labelX:v,labelY:w,label:c,labelStyle:u,labelShowBg:g,labelBgStyle:p,labelBgPadding:m,labelBgBorderRadius:h,style:f,markerEnd:b,markerStart:y,interactionWidth:C})})}en.displayName="StraightEdge",nn.displayName="StraightEdgeInternal";const on=tn({isInternal:!1}),rn=tn({isInternal:!0});on.displayName="BezierEdge",rn.displayName="BezierEdgeInternal";const sn={default:rn,straight:nn,step:qe,smoothstep:Qe,simplebezier:Ke},an={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},dn=(e,n,t)=>t===s.yX.Left?e-n:t===s.yX.Right?e+n:e,ln=(e,n,t)=>t===s.yX.Top?e-n:t===s.yX.Bottom?e+n:e,cn="react-flow__edgeupdater";function un({position:e,centerX:n,centerY:t,radius:r=10,onMouseDown:s,onMouseEnter:a,onMouseOut:d,type:l}){return(0,o.jsx)("circle",{onMouseDown:s,onMouseEnter:a,onMouseOut:d,className:(0,i.A)([cn,`${cn}-${l}`]),cx:dn(n,r,e),cy:ln(t,r,e),r:r,stroke:"transparent",fill:"transparent"})}function gn({isReconnectable:e,reconnectRadius:n,edge:t,sourceX:r,sourceY:i,targetX:a,targetY:d,sourcePosition:l,targetPosition:c,onReconnect:u,onReconnectStart:g,onReconnectEnd:m,setReconnecting:h,setUpdateHover:f}){const b=p(),y=(e,n)=>{if(0!==e.button)return;const{autoPanOnConnect:o,domNode:r,isValidConnection:i,connectionMode:a,connectionRadius:d,lib:l,onConnectStart:c,onConnectEnd:p,cancelConnection:f,nodeLookup:y,rfId:S,panBy:C,updateConnection:x}=b.getState(),v="target"===n.type;s.aQ.onPointerDown(e.nativeEvent,{autoPanOnConnect:o,connectionMode:a,connectionRadius:d,domNode:r,handleId:n.id,nodeId:n.nodeId,nodeLookup:y,isTarget:v,edgeUpdaterType:n.type,lib:l,flowId:S,cancelConnection:f,panBy:C,isValidConnection:i,onConnect:e=>u?.(t,e),onConnectStart:(o,r)=>{h(!0),g?.(e,t,n.type),c?.(o,r)},onConnectEnd:p,onReconnectEnd:(e,o)=>{h(!1),m?.(e,t,n.type,o)},updateConnection:x,getTransform:()=>b.getState().transform,getFromHandle:()=>b.getState().connection.fromHandle,dragThreshold:b.getState().connectionDragThreshold,handleDomNode:e.currentTarget})},S=()=>f(!0),C=()=>f(!1);return(0,o.jsxs)(o.Fragment,{children:[(!0===e||"source"===e)&&(0,o.jsx)(un,{position:l,centerX:r,centerY:i,radius:n,onMouseDown:e=>y(e,{nodeId:t.target,id:t.targetHandle??null,type:"target"}),onMouseEnter:S,onMouseOut:C,type:"source"}),(!0===e||"target"===e)&&(0,o.jsx)(un,{position:c,centerX:a,centerY:d,radius:n,onMouseDown:e=>y(e,{nodeId:t.source,id:t.sourceHandle??null,type:"source"}),onMouseEnter:S,onMouseOut:C,type:"target"})]})}var pn=(0,r.memo)(function({id:e,edgesFocusable:n,edgesReconnectable:t,elementsSelectable:a,onClick:l,onDoubleClick:c,onContextMenu:u,onMouseEnter:m,onMouseMove:h,onMouseLeave:f,reconnectRadius:y,onReconnect:S,onReconnectStart:C,onReconnectEnd:x,rfId:v,edgeTypes:w,noPanClassName:E,onError:k,disableKeyboardA11y:N}){let M=g(n=>n.edgeLookup.get(e));const P=g(e=>e.defaultEdgeOptions);M=P?{...P,...M}:M;let O=M.type||"default",D=w?.[O]||sn[O];void 0===D&&(k?.("011",s.xc.error011(O)),O="default",D=w?.default||sn.default);const R=!!(M.focusable||n&&void 0===M.focusable),L=void 0!==S&&(M.reconnectable||t&&void 0===M.reconnectable),I=!!(M.selectable||a&&void 0===M.selectable),A=(0,r.useRef)(null),[j,z]=(0,r.useState)(!1),[_,B]=(0,r.useState)(!1),V=p(),{zIndex:Z,sourceX:$,sourceY:T,targetX:H,targetY:X,sourcePosition:F,targetPosition:K}=g((0,r.useCallback)(n=>{const t=n.nodeLookup.get(M.source),o=n.nodeLookup.get(M.target);if(!t||!o)return{zIndex:M.zIndex,...an};const r=(0,s.b5)({id:e,sourceNode:t,targetNode:o,sourceHandle:M.sourceHandle||null,targetHandle:M.targetHandle||null,connectionMode:n.connectionMode,onError:k});return{zIndex:(0,s.qX)({selected:M.selected,zIndex:M.zIndex,sourceNode:t,targetNode:o,elevateOnSelect:n.elevateEdgesOnSelect}),...r||an}},[M.source,M.target,M.sourceHandle,M.targetHandle,M.selected,M.zIndex]),d.x),W=(0,r.useMemo)(()=>M.markerStart?`url('#${(0,s.aW)(M.markerStart,v)}')`:void 0,[M.markerStart,v]),Y=(0,r.useMemo)(()=>M.markerEnd?`url('#${(0,s.aW)(M.markerEnd,v)}')`:void 0,[M.markerEnd,v]);if(M.hidden||null===$||null===T||null===H||null===X)return null;const Q=c?e=>{c(e,{...M})}:void 0,G=u?e=>{u(e,{...M})}:void 0,U=m?e=>{m(e,{...M})}:void 0,q=h?e=>{h(e,{...M})}:void 0,J=f?e=>{f(e,{...M})}:void 0;return(0,o.jsx)("svg",{style:{zIndex:Z},children:(0,o.jsxs)("g",{className:(0,i.A)(["react-flow__edge",`react-flow__edge-${O}`,M.className,E,{selected:M.selected,animated:M.animated,inactive:!I&&!l,updating:j,selectable:I}]),onClick:n=>{const{addSelectedEdges:t,unselectNodesAndEdges:o,multiSelectionActive:r}=V.getState();I&&(V.setState({nodesSelectionActive:!1}),M.selected&&r?(o({nodes:[],edges:[M]}),A.current?.blur()):t([e])),l&&l(n,M)},onDoubleClick:Q,onContextMenu:G,onMouseEnter:U,onMouseMove:q,onMouseLeave:J,onKeyDown:R?n=>{if(!N&&s.tn.includes(n.key)&&I){const{unselectNodesAndEdges:t,addSelectedEdges:o}=V.getState();"Escape"===n.key?(A.current?.blur(),t({edges:[M]})):o([e])}}:void 0,tabIndex:R?0:void 0,role:M.ariaRole??(R?"group":"img"),"aria-roledescription":"edge","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":null===M.ariaLabel?void 0:M.ariaLabel||`Edge from ${M.source} to ${M.target}`,"aria-describedby":R?`${b}-${v}`:void 0,ref:A,...M.domAttributes,children:[!_&&(0,o.jsx)(D,{id:e,source:M.source,target:M.target,type:M.type,selected:M.selected,animated:M.animated,selectable:I,deletable:M.deletable??!0,label:M.label,labelStyle:M.labelStyle,labelShowBg:M.labelShowBg,labelBgStyle:M.labelBgStyle,labelBgPadding:M.labelBgPadding,labelBgBorderRadius:M.labelBgBorderRadius,sourceX:$,sourceY:T,targetX:H,targetY:X,sourcePosition:F,targetPosition:K,data:M.data,style:M.style,sourceHandleId:M.sourceHandle,targetHandleId:M.targetHandle,markerStart:W,markerEnd:Y,pathOptions:"pathOptions"in M?M.pathOptions:void 0,interactionWidth:M.interactionWidth}),L&&(0,o.jsx)(gn,{edge:M,isReconnectable:L,reconnectRadius:y,onReconnect:S,onReconnectStart:C,onReconnectEnd:x,sourceX:$,sourceY:T,targetX:H,targetY:X,sourcePosition:F,targetPosition:K,setUpdateHover:z,setReconnecting:B})]})})});const mn=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function hn({defaultMarkerColor:e,onlyRenderVisibleElements:n,rfId:t,edgeTypes:i,noPanClassName:a,onReconnect:l,onEdgeContextMenu:c,onEdgeMouseEnter:u,onEdgeMouseMove:p,onEdgeMouseLeave:m,onEdgeClick:h,reconnectRadius:f,onEdgeDoubleClick:b,onReconnectStart:y,onReconnectEnd:S,disableKeyboardA11y:C}){const{edgesFocusable:x,edgesReconnectable:v,elementsSelectable:w,onError:E}=g(mn,d.x),k=(N=n,g((0,r.useCallback)(e=>{if(!N)return e.edges.map(e=>e.id);const n=[];if(e.width&&e.height)for(const t of e.edges){const o=e.nodeLookup.get(t.source),r=e.nodeLookup.get(t.target);o&&r&&(0,s.uj)({sourceNode:o,targetNode:r,width:e.width,height:e.height,transform:e.transform})&&n.push(t.id)}return n},[N]),d.x));var N;return(0,o.jsxs)("div",{className:"react-flow__edges",children:[(0,o.jsx)(Be,{defaultColor:e,rfId:t}),k.map(e=>(0,o.jsx)(pn,{id:e,edgesFocusable:x,edgesReconnectable:v,elementsSelectable:w,noPanClassName:a,onReconnect:l,onContextMenu:c,onMouseEnter:u,onMouseMove:p,onMouseLeave:m,onClick:h,reconnectRadius:f,onDoubleClick:b,onReconnectStart:y,onReconnectEnd:S,rfId:t,onError:E,edgeTypes:i,disableKeyboardA11y:C},e))]})}hn.displayName="EdgeRenderer";const fn=(0,r.memo)(hn),bn=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function yn({children:e}){const n=g(bn);return(0,o.jsx)("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:n},children:e})}const Sn=e=>e.panZoom?.syncViewport;function Cn(e){return e.connection.inProgress?{...e.connection,to:(0,s.Ff)(e.connection.to,e.transform)}:{...e.connection}}function xn(e){const n=function(e){if(e)return n=>{const t=Cn(n);return e(t)};return Cn}(e);return g(n,d.x)}const vn=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function wn({containerStyle:e,style:n,type:t,component:r}){const{nodesConnectable:a,width:l,height:c,isValid:u,inProgress:p}=g(vn,d.x);return!!(l&&a&&p)?(0,o.jsx)("svg",{style:e,width:l,height:c,className:"react-flow__connectionline react-flow__container",children:(0,o.jsx)("g",{className:(0,i.A)(["react-flow__connection",(0,s.HF)(u)]),children:(0,o.jsx)(En,{style:n,type:t,CustomComponent:r,isValid:u})})}):null}const En=({style:e,type:n=s.Do.Bezier,CustomComponent:t,isValid:r})=>{const{inProgress:i,from:a,fromNode:d,fromHandle:l,fromPosition:c,to:u,toNode:g,toHandle:p,toPosition:m}=xn();if(!i)return;if(t)return(0,o.jsx)(t,{connectionLineType:n,connectionLineStyle:e,fromNode:d,fromHandle:l,fromX:a.x,fromY:a.y,toX:u.x,toY:u.y,fromPosition:c,toPosition:m,connectionStatus:(0,s.HF)(r),toNode:g,toHandle:p});let h="";const f={sourceX:a.x,sourceY:a.y,sourcePosition:c,targetX:u.x,targetY:u.y,targetPosition:m};switch(n){case s.Do.Bezier:[h]=(0,s.Fp)(f);break;case s.Do.SimpleBezier:[h]=He(f);break;case s.Do.Step:[h]=(0,s.oN)({...f,borderRadius:0});break;case s.Do.SmoothStep:[h]=(0,s.oN)(f);break;default:[h]=(0,s.ah)(f)}return(0,o.jsx)("path",{d:h,fill:"none",className:"react-flow__connection-path",style:e})};En.displayName="ConnectionLine";const kn={};function Nn(e=kn){(0,r.useRef)(e),p();(0,r.useEffect)(()=>{0},[e])}function Mn({nodeTypes:e,edgeTypes:n,onInit:t,onNodeClick:i,onEdgeClick:s,onNodeDoubleClick:a,onEdgeDoubleClick:d,onNodeMouseEnter:l,onNodeMouseMove:c,onNodeMouseLeave:u,onNodeContextMenu:m,onSelectionContextMenu:h,onSelectionStart:f,onSelectionEnd:b,connectionLineType:y,connectionLineStyle:S,connectionLineComponent:C,connectionLineContainerStyle:x,selectionKeyCode:v,selectionOnDrag:w,selectionMode:E,multiSelectionKeyCode:k,panActivationKeyCode:N,zoomActivationKeyCode:M,deleteKeyCode:P,onlyRenderVisibleElements:O,elementsSelectable:D,defaultViewport:R,translateExtent:L,minZoom:I,maxZoom:A,preventScrolling:j,defaultMarkerColor:z,zoomOnScroll:_,zoomOnPinch:B,panOnScroll:V,panOnScrollSpeed:Z,panOnScrollMode:$,zoomOnDoubleClick:T,panOnDrag:H,onPaneClick:X,onPaneMouseEnter:F,onPaneMouseMove:K,onPaneMouseLeave:W,onPaneScroll:Y,onPaneContextMenu:Q,paneClickDistance:G,nodeClickDistance:U,onEdgeContextMenu:q,onEdgeMouseEnter:J,onEdgeMouseMove:ee,onEdgeMouseLeave:ne,reconnectRadius:oe,onReconnect:re,onReconnectStart:ie,onReconnectEnd:se,noDragClassName:ae,noWheelClassName:de,noPanClassName:le,disableKeyboardA11y:ce,nodeExtent:ue,rfId:ge,viewport:pe,onViewportChange:me}){return Nn(e),Nn(n),p(),(0,r.useRef)(!1),(0,r.useEffect)(()=>{},[]),function(e){const n=te(),t=(0,r.useRef)(!1);(0,r.useEffect)(()=>{!t.current&&n.viewportInitialized&&e&&(setTimeout(()=>e(n),1),t.current=!0)},[e,n.viewportInitialized])}(t),function(e){const n=g(Sn),t=p();(0,r.useEffect)(()=>{e&&(n?.(e),t.setState({transform:[e.x,e.y,e.zoom]}))},[e,n])}(pe),(0,o.jsx)(Pe,{onPaneClick:X,onPaneMouseEnter:F,onPaneMouseMove:K,onPaneMouseLeave:W,onPaneContextMenu:Q,onPaneScroll:Y,paneClickDistance:G,deleteKeyCode:P,selectionKeyCode:v,selectionOnDrag:w,selectionMode:E,onSelectionStart:f,onSelectionEnd:b,multiSelectionKeyCode:k,panActivationKeyCode:N,zoomActivationKeyCode:M,elementsSelectable:D,zoomOnScroll:_,zoomOnPinch:B,zoomOnDoubleClick:T,panOnScroll:V,panOnScrollSpeed:Z,panOnScrollMode:$,panOnDrag:H,defaultViewport:R,translateExtent:L,minZoom:I,maxZoom:A,onSelectionContextMenu:h,preventScrolling:j,noDragClassName:ae,noWheelClassName:de,noPanClassName:le,disableKeyboardA11y:ce,onViewportChange:me,isControlledViewport:!!pe,children:(0,o.jsxs)(yn,{children:[(0,o.jsx)(fn,{edgeTypes:n,onEdgeClick:s,onEdgeDoubleClick:d,onReconnect:re,onReconnectStart:ie,onReconnectEnd:se,onlyRenderVisibleElements:O,onEdgeContextMenu:q,onEdgeMouseEnter:J,onEdgeMouseMove:ee,onEdgeMouseLeave:ne,reconnectRadius:oe,defaultMarkerColor:z,noPanClassName:le,disableKeyboardA11y:ce,rfId:ge}),(0,o.jsx)(wn,{style:S,type:y,component:C,containerStyle:x}),(0,o.jsx)("div",{className:"react-flow__edgelabel-renderer"}),(0,o.jsx)(Ae,{nodeTypes:e,onNodeClick:i,onNodeDoubleClick:a,onNodeMouseEnter:l,onNodeMouseMove:c,onNodeMouseLeave:u,onNodeContextMenu:m,nodeClickDistance:U,onlyRenderVisibleElements:O,noPanClassName:le,noDragClassName:ae,disableKeyboardA11y:ce,nodeExtent:ue,rfId:ge}),(0,o.jsx)("div",{className:"react-flow__viewport-portal"})]})})}Mn.displayName="GraphView";const Pn=(0,r.memo)(Mn),On=({nodes:e,edges:n,defaultNodes:t,defaultEdges:o,width:r,height:i,fitView:a,fitViewOptions:d,minZoom:l=.5,maxZoom:c=2,nodeOrigin:u,nodeExtent:g}={})=>{const p=new Map,m=new Map,h=new Map,f=new Map,b=o??n??[],y=t??e??[],S=u??[0,0],C=g??s.ZO;(0,s.qn)(h,f,b);const x=(0,s.bi)(y,p,m,{nodeOrigin:S,nodeExtent:C,elevateNodesOnSelect:!1});let v=[0,0,1];if(a&&r&&i){const e=(0,s.aZ)(p,{filter:e=>!(!e.width&&!e.initialWidth||!e.height&&!e.initialHeight)}),{x:n,y:t,zoom:o}=(0,s.R4)(e,r,i,l,c,d?.padding??.1);v=[n,t,o]}return{rfId:"1",width:r??0,height:i??0,transform:v,nodes:y,nodesInitialized:x,nodeLookup:p,parentLookup:m,edges:b,edgeLookup:f,connectionLookup:h,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:void 0!==t,hasDefaultEdges:void 0!==o,panZoom:null,minZoom:l,maxZoom:c,translateExtent:s.ZO,nodeExtent:C,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:s.WZ.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:S,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:a??!1,fitViewOptions:d,fitViewResolver:null,connection:{...s.bK},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:s.KE,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:s.tM}};function Dn({initialNodes:e,initialEdges:n,defaultNodes:t,defaultEdges:i,initialWidth:d,initialHeight:l,initialMinZoom:u,initialMaxZoom:g,initialFitViewOptions:p,fitView:m,nodeOrigin:h,nodeExtent:f,children:b}){const[y]=(0,r.useState)(()=>(({nodes:e,edges:n,defaultNodes:t,defaultEdges:o,width:r,height:i,fitView:d,fitViewOptions:l,minZoom:c,maxZoom:u,nodeOrigin:g,nodeExtent:p})=>(0,a.h)((a,m)=>{async function h(){const{nodeLookup:e,panZoom:n,fitViewOptions:t,fitViewResolver:o,width:r,height:i,minZoom:d,maxZoom:l}=m();n&&(await(0,s.IO)({nodes:e,width:r,height:i,panZoom:n,minZoom:d,maxZoom:l},t),o?.resolve(!0),a({fitViewResolver:null}))}return{...On({nodes:e,edges:n,width:r,height:i,fitView:d,fitViewOptions:l,minZoom:c,maxZoom:u,nodeOrigin:g,nodeExtent:p,defaultNodes:t,defaultEdges:o}),setNodes:e=>{const{nodeLookup:n,parentLookup:t,nodeOrigin:o,elevateNodesOnSelect:r,fitViewQueued:i}=m(),d=(0,s.bi)(e,n,t,{nodeOrigin:o,nodeExtent:p,elevateNodesOnSelect:r,checkEquality:!0});i&&d?(h(),a({nodes:e,nodesInitialized:d,fitViewQueued:!1,fitViewOptions:void 0})):a({nodes:e,nodesInitialized:d})},setEdges:e=>{const{connectionLookup:n,edgeLookup:t}=m();(0,s.qn)(n,t,e),a({edges:e})},setDefaultNodesAndEdges:(e,n)=>{if(e){const{setNodes:n}=m();n(e),a({hasDefaultNodes:!0})}if(n){const{setEdges:e}=m();e(n),a({hasDefaultEdges:!0})}},updateNodeInternals:e=>{const{triggerNodeChanges:n,nodeLookup:t,parentLookup:o,domNode:r,nodeOrigin:i,nodeExtent:d,debug:l,fitViewQueued:c}=m(),{changes:u,updatedInternals:g}=(0,s.uL)(e,t,o,r,i,d);g&&((0,s.vS)(t,o,{nodeOrigin:i,nodeExtent:d}),c?(h(),a({fitViewQueued:!1,fitViewOptions:void 0})):a({}),u?.length>0&&(l&&console.log("React Flow: trigger node changes",u),n?.(u)))},updateNodePositions:(e,n=!1)=>{const t=[],o=[],{nodeLookup:r,triggerNodeChanges:i}=m();for(const[i,s]of e){const e=r.get(i),a=!!(e?.expandParent&&e?.parentId&&s?.position),d={id:i,type:"position",position:a?{x:Math.max(0,s.position.x),y:Math.max(0,s.position.y)}:s.position,dragging:n};a&&e.parentId&&t.push({id:i,parentId:e.parentId,rect:{...s.internals.positionAbsolute,width:s.measured.width??0,height:s.measured.height??0}}),o.push(d)}if(t.length>0){const{parentLookup:e,nodeOrigin:n}=m(),i=(0,s.r8)(t,r,e,n);o.push(...i)}i(o)},triggerNodeChanges:e=>{const{onNodesChange:n,setNodes:t,nodes:o,hasDefaultNodes:r,debug:i}=m();e?.length&&(r&&t(H(e,o)),i&&console.log("React Flow: trigger node changes",e),n?.(e))},triggerEdgeChanges:e=>{const{onEdgesChange:n,setEdges:t,edges:o,hasDefaultEdges:r,debug:i}=m();e?.length&&(r&&t(X(e,o)),i&&console.log("React Flow: trigger edge changes",e),n?.(e))},addSelectedNodes:e=>{const{multiSelectionActive:n,edgeLookup:t,nodeLookup:o,triggerNodeChanges:r,triggerEdgeChanges:i}=m();n?r(e.map(e=>F(e,!0))):(r(K(o,new Set([...e]),!0)),i(K(t)))},addSelectedEdges:e=>{const{multiSelectionActive:n,edgeLookup:t,nodeLookup:o,triggerNodeChanges:r,triggerEdgeChanges:i}=m();n?i(e.map(e=>F(e,!0))):(i(K(t,new Set([...e]))),r(K(o,new Set,!0)))},unselectNodesAndEdges:({nodes:e,edges:n}={})=>{const{edges:t,nodes:o,nodeLookup:r,triggerNodeChanges:i,triggerEdgeChanges:s}=m(),a=n||t,d=(e||o).map(e=>{const n=r.get(e.id);return n&&(n.selected=!1),F(e.id,!1)}),l=a.map(e=>F(e.id,!1));i(d),s(l)},setMinZoom:e=>{const{panZoom:n,maxZoom:t}=m();n?.setScaleExtent([e,t]),a({minZoom:e})},setMaxZoom:e=>{const{panZoom:n,minZoom:t}=m();n?.setScaleExtent([t,e]),a({maxZoom:e})},setTranslateExtent:e=>{m().panZoom?.setTranslateExtent(e),a({translateExtent:e})},resetSelectedElements:()=>{const{edges:e,nodes:n,triggerNodeChanges:t,triggerEdgeChanges:o,elementsSelectable:r}=m();if(!r)return;const i=n.reduce((e,n)=>n.selected?[...e,F(n.id,!1)]:e,[]),s=e.reduce((e,n)=>n.selected?[...e,F(n.id,!1)]:e,[]);t(i),o(s)},setNodeExtent:e=>{const{nodes:n,nodeLookup:t,parentLookup:o,nodeOrigin:r,elevateNodesOnSelect:i,nodeExtent:d}=m();e[0][0]===d[0][0]&&e[0][1]===d[0][1]&&e[1][0]===d[1][0]&&e[1][1]===d[1][1]||((0,s.bi)(n,t,o,{nodeOrigin:r,nodeExtent:e,elevateNodesOnSelect:i,checkEquality:!1}),a({nodeExtent:e}))},panBy:e=>{const{transform:n,width:t,height:o,panZoom:r,translateExtent:i}=m();return(0,s.No)({delta:e,panZoom:r,transform:n,translateExtent:i,width:t,height:o})},setCenter:async(e,n,t)=>{const{width:o,height:r,maxZoom:i,panZoom:s}=m();if(!s)return Promise.resolve(!1);const a=void 0!==t?.zoom?t.zoom:i;return await s.setViewport({x:o/2-e*a,y:r/2-n*a,zoom:a},{duration:t?.duration,ease:t?.ease,interpolate:t?.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{a({connection:{...s.bK}})},updateConnection:e=>{a({connection:e})},reset:()=>a({...On()})}},Object.is))({nodes:e,edges:n,defaultNodes:t,defaultEdges:i,width:d,height:l,fitView:m,minZoom:u,maxZoom:g,fitViewOptions:p,nodeOrigin:h,nodeExtent:f}));return(0,o.jsx)(c,{value:y,children:(0,o.jsx)(ee,{children:b})})}function Rn({children:e,nodes:n,edges:t,defaultNodes:i,defaultEdges:s,width:a,height:d,fitView:c,fitViewOptions:u,minZoom:g,maxZoom:p,nodeOrigin:m,nodeExtent:h}){return(0,r.useContext)(l)?(0,o.jsx)(o.Fragment,{children:e}):(0,o.jsx)(Dn,{initialNodes:n,initialEdges:t,defaultNodes:i,defaultEdges:s,initialWidth:a,initialHeight:d,fitView:c,initialFitViewOptions:u,initialMinZoom:g,initialMaxZoom:p,nodeOrigin:m,nodeExtent:h,children:e})}const Ln={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};var In=G(function({nodes:e,edges:n,defaultNodes:t,defaultEdges:a,className:d,nodeTypes:l,edgeTypes:c,onNodeClick:u,onEdgeClick:g,onInit:p,onMove:m,onMoveStart:h,onMoveEnd:f,onConnect:b,onConnectStart:y,onConnectEnd:S,onClickConnectStart:C,onClickConnectEnd:v,onNodeMouseEnter:E,onNodeMouseMove:k,onNodeMouseLeave:N,onNodeContextMenu:M,onNodeDoubleClick:P,onNodeDragStart:L,onNodeDrag:I,onNodeDragStop:A,onNodesDelete:_,onEdgesDelete:B,onDelete:V,onSelectionChange:Z,onSelectionDragStart:$,onSelectionDrag:T,onSelectionDragStop:H,onSelectionContextMenu:X,onSelectionStart:F,onSelectionEnd:K,onBeforeDelete:W,connectionMode:Y,connectionLineType:Q=s.Do.Bezier,connectionLineStyle:G,connectionLineComponent:U,connectionLineContainerStyle:q,deleteKeyCode:J="Backspace",selectionKeyCode:ee="Shift",selectionOnDrag:ne=!1,selectionMode:te=s.Qc.Full,panActivationKeyCode:oe="Space",multiSelectionKeyCode:re=((0,s.Ue)()?"Meta":"Control"),zoomActivationKeyCode:ie=((0,s.Ue)()?"Meta":"Control"),snapToGrid:se,snapGrid:ae,onlyRenderVisibleElements:de=!1,selectNodesOnDrag:le,nodesDraggable:ce,autoPanOnNodeFocus:ue,nodesConnectable:ge,nodesFocusable:pe,nodeOrigin:me=D,edgesFocusable:he,edgesReconnectable:fe,elementsSelectable:be=!0,defaultViewport:ye=R,minZoom:Se=.5,maxZoom:Ce=2,translateExtent:xe=s.ZO,preventScrolling:ve=!0,nodeExtent:we,defaultMarkerColor:Ee="#b1b1b7",zoomOnScroll:ke=!0,zoomOnPinch:Ne=!0,panOnScroll:Me=!1,panOnScrollSpeed:Pe=.5,panOnScrollMode:Oe=s.ny.Free,zoomOnDoubleClick:De=!0,panOnDrag:Re=!0,onPaneClick:Le,onPaneMouseEnter:Ie,onPaneMouseMove:Ae,onPaneMouseLeave:je,onPaneScroll:ze,onPaneContextMenu:_e,paneClickDistance:Be=0,nodeClickDistance:Ve=0,children:Ze,onReconnect:$e,onReconnectStart:Te,onReconnectEnd:He,onEdgeContextMenu:Xe,onEdgeDoubleClick:Fe,onEdgeMouseEnter:Ke,onEdgeMouseMove:We,onEdgeMouseLeave:Ye,reconnectRadius:Qe=10,onNodesChange:Ge,onEdgesChange:Ue,noDragClassName:qe="nodrag",noWheelClassName:Je="nowheel",noPanClassName:en="nopan",fitView:nn,fitViewOptions:tn,connectOnClick:on,attributionPosition:rn,proOptions:sn,defaultEdgeOptions:an,elevateNodesOnSelect:dn,elevateEdgesOnSelect:ln,disableKeyboardA11y:cn=!1,autoPanOnConnect:un,autoPanOnNodeDrag:gn,autoPanSpeed:pn,connectionRadius:mn,isValidConnection:hn,onError:fn,style:bn,id:yn,nodeDragThreshold:Sn,connectionDragThreshold:Cn,viewport:xn,onViewportChange:vn,width:wn,height:En,colorMode:kn="light",debug:Nn,onScroll:Mn,ariaLabelConfig:On,...Dn},In){const An=yn||"1",jn=function(e){const[n,t]=(0,r.useState)("system"===e?null:e);return(0,r.useEffect)(()=>{if("system"!==e)return void t(e);const n=z(),o=()=>t(n?.matches?"dark":"light");return o(),n?.addEventListener("change",o),()=>{n?.removeEventListener("change",o)}},[e]),null!==n?n:z()?.matches?"dark":"light"}(kn),zn=(0,r.useCallback)(e=>{e.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),Mn?.(e)},[Mn]);return(0,o.jsx)("div",{"data-testid":"rf__wrapper",...Dn,onScroll:zn,style:{...bn,...Ln},ref:In,className:(0,i.A)(["react-flow",d,jn]),id:yn,role:"application",children:(0,o.jsxs)(Rn,{nodes:e,edges:n,width:wn,height:En,fitView:nn,fitViewOptions:tn,minZoom:Se,maxZoom:Ce,nodeOrigin:me,nodeExtent:we,children:[(0,o.jsx)(Pn,{onInit:p,onNodeClick:u,onEdgeClick:g,onNodeMouseEnter:E,onNodeMouseMove:k,onNodeMouseLeave:N,onNodeContextMenu:M,onNodeDoubleClick:P,nodeTypes:l,edgeTypes:c,connectionLineType:Q,connectionLineStyle:G,connectionLineComponent:U,connectionLineContainerStyle:q,selectionKeyCode:ee,selectionOnDrag:ne,selectionMode:te,deleteKeyCode:J,multiSelectionKeyCode:re,panActivationKeyCode:oe,zoomActivationKeyCode:ie,onlyRenderVisibleElements:de,defaultViewport:ye,translateExtent:xe,minZoom:Se,maxZoom:Ce,preventScrolling:ve,zoomOnScroll:ke,zoomOnPinch:Ne,zoomOnDoubleClick:De,panOnScroll:Me,panOnScrollSpeed:Pe,panOnScrollMode:Oe,panOnDrag:Re,onPaneClick:Le,onPaneMouseEnter:Ie,onPaneMouseMove:Ae,onPaneMouseLeave:je,onPaneScroll:ze,onPaneContextMenu:_e,paneClickDistance:Be,nodeClickDistance:Ve,onSelectionContextMenu:X,onSelectionStart:F,onSelectionEnd:K,onReconnect:$e,onReconnectStart:Te,onReconnectEnd:He,onEdgeContextMenu:Xe,onEdgeDoubleClick:Fe,onEdgeMouseEnter:Ke,onEdgeMouseMove:We,onEdgeMouseLeave:Ye,reconnectRadius:Qe,defaultMarkerColor:Ee,noDragClassName:qe,noWheelClassName:Je,noPanClassName:en,rfId:An,disableKeyboardA11y:cn,nodeExtent:we,viewport:xn,onViewportChange:vn}),(0,o.jsx)(j,{nodes:e,edges:n,defaultNodes:t,defaultEdges:a,onConnect:b,onConnectStart:y,onConnectEnd:S,onClickConnectStart:C,onClickConnectEnd:v,nodesDraggable:ce,autoPanOnNodeFocus:ue,nodesConnectable:ge,nodesFocusable:pe,edgesFocusable:he,edgesReconnectable:fe,elementsSelectable:be,elevateNodesOnSelect:dn,elevateEdgesOnSelect:ln,minZoom:Se,maxZoom:Ce,nodeExtent:we,onNodesChange:Ge,onEdgesChange:Ue,snapToGrid:se,snapGrid:ae,connectionMode:Y,translateExtent:xe,connectOnClick:on,defaultEdgeOptions:an,fitView:nn,fitViewOptions:tn,onNodesDelete:_,onEdgesDelete:B,onDelete:V,onNodeDragStart:L,onNodeDrag:I,onNodeDragStop:A,onSelectionDrag:T,onSelectionDragStart:$,onSelectionDragStop:H,onMove:m,onMoveStart:h,onMoveEnd:f,noPanClassName:en,nodeOrigin:me,rfId:An,autoPanOnConnect:un,autoPanOnNodeDrag:gn,autoPanSpeed:pn,onError:fn,connectionRadius:mn,isValidConnection:hn,selectNodesOnDrag:le,nodeDragThreshold:Sn,connectionDragThreshold:Cn,onBeforeDelete:W,debug:Nn,ariaLabelConfig:On}),(0,o.jsx)(O,{onSelectionChange:Z}),Ze,(0,o.jsx)(w,{proOptions:sn,position:rn}),(0,o.jsx)(x,{rfId:An,disableKeyboardA11y:cn})]})})});function An(e){const[n,t]=(0,r.useState)(e),o=(0,r.useCallback)(e=>t(n=>H(e,n)),[]);return[n,t,o]}function jn(e){const[n,t]=(0,r.useState)(e),o=(0,r.useCallback)(e=>t(n=>X(e,n)),[]);return[n,t,o]}s.xc.error014();function zn({dimensions:e,lineWidth:n,variant:t,className:r}){return(0,o.jsx)("path",{strokeWidth:n,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:(0,i.A)(["react-flow__background-pattern",t,r])})}function _n({radius:e,className:n}){return(0,o.jsx)("circle",{cx:e,cy:e,r:e,className:(0,i.A)(["react-flow__background-pattern","dots",n])})}var Bn;!function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"}(Bn||(Bn={}));const Vn={[Bn.Dots]:1,[Bn.Lines]:1,[Bn.Cross]:6},Zn=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function $n({id:e,variant:n=Bn.Dots,gap:t=20,size:s,lineWidth:a=1,offset:l=0,color:c,bgColor:u,style:p,className:m,patternClassName:h}){const f=(0,r.useRef)(null),{transform:b,patternId:y}=g(Zn,d.x),S=s||Vn[n],C=n===Bn.Dots,x=n===Bn.Cross,v=Array.isArray(t)?t:[t,t],w=[v[0]*b[2]||1,v[1]*b[2]||1],E=S*b[2],k=Array.isArray(l)?l:[l,l],N=x?[E,E]:w,M=[k[0]*b[2]||1+N[0]/2,k[1]*b[2]||1+N[1]/2],P=`${y}${e||""}`;return(0,o.jsxs)("svg",{className:(0,i.A)(["react-flow__background",m]),style:{...p,...ie,"--xy-background-color-props":u,"--xy-background-pattern-color-props":c},ref:f,"data-testid":"rf__background",children:[(0,o.jsx)("pattern",{id:P,x:b[0]%w[0],y:b[1]%w[1],width:w[0],height:w[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${M[0]},-${M[1]})`,children:C?(0,o.jsx)(_n,{radius:E/2,className:h}):(0,o.jsx)(zn,{dimensions:N,lineWidth:a,variant:n,className:h})}),(0,o.jsx)("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${P})`})]})}$n.displayName="Background";const Tn=(0,r.memo)($n);function Hn(){return(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:(0,o.jsx)("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function Xn(){return(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:(0,o.jsx)("path",{d:"M0 0h32v4.2H0z"})})}function Fn(){return(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:(0,o.jsx)("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function Kn(){return(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:(0,o.jsx)("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function Wn(){return(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:(0,o.jsx)("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function Yn({children:e,className:n,...t}){return(0,o.jsx)("button",{type:"button",className:(0,i.A)(["react-flow__controls-button",n]),...t,children:e})}const Qn=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom,ariaLabelConfig:e.ariaLabelConfig});function Gn({style:e,showZoom:n=!0,showFitView:t=!0,showInteractive:r=!0,fitViewOptions:s,onZoomIn:a,onZoomOut:l,onFitView:c,onInteractiveChange:u,className:m,children:h,position:f="bottom-left",orientation:b="vertical","aria-label":y}){const S=p(),{isInteractive:C,minZoomReached:x,maxZoomReached:w,ariaLabelConfig:E}=g(Qn,d.x),{zoomIn:k,zoomOut:N,fitView:M}=te(),P="horizontal"===b?"horizontal":"vertical";return(0,o.jsxs)(v,{className:(0,i.A)(["react-flow__controls",P,m]),position:f,style:e,"data-testid":"rf__controls","aria-label":y??E["controls.ariaLabel"],children:[n&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Yn,{onClick:()=>{k(),a?.()},className:"react-flow__controls-zoomin",title:E["controls.zoomIn.ariaLabel"],"aria-label":E["controls.zoomIn.ariaLabel"],disabled:w,children:(0,o.jsx)(Hn,{})}),(0,o.jsx)(Yn,{onClick:()=>{N(),l?.()},className:"react-flow__controls-zoomout",title:E["controls.zoomOut.ariaLabel"],"aria-label":E["controls.zoomOut.ariaLabel"],disabled:x,children:(0,o.jsx)(Xn,{})})]}),t&&(0,o.jsx)(Yn,{className:"react-flow__controls-fitview",onClick:()=>{M(s),c?.()},title:E["controls.fitView.ariaLabel"],"aria-label":E["controls.fitView.ariaLabel"],children:(0,o.jsx)(Fn,{})}),r&&(0,o.jsx)(Yn,{className:"react-flow__controls-interactive",onClick:()=>{S.setState({nodesDraggable:!C,nodesConnectable:!C,elementsSelectable:!C}),u?.(!C)},title:E["controls.interactive.ariaLabel"],"aria-label":E["controls.interactive.ariaLabel"],children:C?(0,o.jsx)(Wn,{}):(0,o.jsx)(Kn,{})}),h]})}Gn.displayName="Controls";const Un=(0,r.memo)(Gn);const qn=(0,r.memo)(function({id:e,x:n,y:t,width:r,height:s,style:a,color:d,strokeColor:l,strokeWidth:c,className:u,borderRadius:g,shapeRendering:p,selected:m,onClick:h}){const{background:f,backgroundColor:b}=a||{},y=d||f||b;return(0,o.jsx)("rect",{className:(0,i.A)(["react-flow__minimap-node",{selected:m},u]),x:n,y:t,rx:g,ry:g,width:r,height:s,style:{fill:y,stroke:l,strokeWidth:c},shapeRendering:p,onClick:h?n=>h(n,e):void 0})}),Jn=e=>e.nodes.map(e=>e.id),et=e=>e instanceof Function?e:()=>e;const nt=(0,r.memo)(function({id:e,nodeColorFunc:n,nodeStrokeColorFunc:t,nodeClassNameFunc:r,nodeBorderRadius:i,nodeStrokeWidth:a,shapeRendering:l,NodeComponent:c,onClick:u}){const{node:p,x:m,y:h,width:f,height:b}=g(n=>{const{internals:t}=n.nodeLookup.get(e),o=t.userNode,{x:r,y:i}=t.positionAbsolute,{width:a,height:d}=(0,s.uD)(o);return{node:o,x:r,y:i,width:a,height:d}},d.x);return p&&!p.hidden&&(0,s.QE)(p)?(0,o.jsx)(c,{x:m,y:h,width:f,height:b,style:p.style,selected:!!p.selected,className:r(p),color:n(p),borderRadius:i,strokeColor:t(p),strokeWidth:a,shapeRendering:l,onClick:u,id:p.id}):null});var tt=(0,r.memo)(function({nodeStrokeColor:e,nodeColor:n,nodeClassName:t="",nodeBorderRadius:r=5,nodeStrokeWidth:i,nodeComponent:s=qn,onClick:a}){const l=g(Jn,d.x),c=et(n),u=et(e),p=et(t),m="undefined"==typeof window||window.chrome?"crispEdges":"geometricPrecision";return(0,o.jsx)(o.Fragment,{children:l.map(e=>(0,o.jsx)(nt,{id:e,nodeColorFunc:c,nodeStrokeColorFunc:u,nodeClassNameFunc:p,nodeBorderRadius:r,nodeStrokeWidth:i,NodeComponent:s,onClick:a,shapeRendering:m},e))})});const ot=e=>!e.hidden,rt=e=>{const n={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:n,boundingRect:e.nodeLookup.size>0?(0,s.Mi)((0,s.aZ)(e.nodeLookup,{filter:ot}),n):n,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height,ariaLabelConfig:e.ariaLabelConfig}};function it({style:e,className:n,nodeStrokeColor:t,nodeColor:a,nodeClassName:l="",nodeBorderRadius:c=5,nodeStrokeWidth:u,nodeComponent:m,bgColor:h,maskColor:f,maskStrokeColor:b,maskStrokeWidth:y,position:S="bottom-right",onClick:C,onNodeClick:x,pannable:w=!1,zoomable:E=!1,ariaLabel:k,inversePan:N,zoomStep:M=1,offsetScale:P=5}){const O=p(),D=(0,r.useRef)(null),{boundingRect:R,viewBB:L,rfId:I,panZoom:A,translateExtent:j,flowWidth:z,flowHeight:_,ariaLabelConfig:B}=g(rt,d.x),V=e?.width??200,Z=e?.height??150,$=R.width/V,T=R.height/Z,H=Math.max($,T),X=H*V,F=H*Z,K=P*H,W=R.x-(X-R.width)/2-K,Y=R.y-(F-R.height)/2-K,Q=X+2*K,G=F+2*K,U=`react-flow__minimap-desc-${I}`,q=(0,r.useRef)(0),J=(0,r.useRef)();q.current=H,(0,r.useEffect)(()=>{if(D.current&&A)return J.current=(0,s.di)({domNode:D.current,panZoom:A,getTransform:()=>O.getState().transform,getViewScale:()=>q.current}),()=>{J.current?.destroy()}},[A]),(0,r.useEffect)(()=>{J.current?.update({translateExtent:j,width:z,height:_,inversePan:N,pannable:w,zoomStep:M,zoomable:E})},[w,E,N,M,j,z,_]);const ee=C?e=>{const[n,t]=J.current?.pointer(e)||[0,0];C(e,{x:n,y:t})}:void 0,ne=x?(0,r.useCallback)((e,n)=>{const t=O.getState().nodeLookup.get(n).internals.userNode;x(e,t)},[]):void 0,te=k??B["minimap.ariaLabel"];return(0,o.jsx)(v,{position:S,style:{...e,"--xy-minimap-background-color-props":"string"==typeof h?h:void 0,"--xy-minimap-mask-background-color-props":"string"==typeof f?f:void 0,"--xy-minimap-mask-stroke-color-props":"string"==typeof b?b:void 0,"--xy-minimap-mask-stroke-width-props":"number"==typeof y?y*H:void 0,"--xy-minimap-node-background-color-props":"string"==typeof a?a:void 0,"--xy-minimap-node-stroke-color-props":"string"==typeof t?t:void 0,"--xy-minimap-node-stroke-width-props":"number"==typeof u?u:void 0},className:(0,i.A)(["react-flow__minimap",n]),"data-testid":"rf__minimap",children:(0,o.jsxs)("svg",{width:V,height:Z,viewBox:`${W} ${Y} ${Q} ${G}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":U,ref:D,onClick:ee,children:[te&&(0,o.jsx)("title",{id:U,children:te}),(0,o.jsx)(tt,{onClick:ne,nodeColor:a,nodeStrokeColor:t,nodeBorderRadius:c,nodeClassName:l,nodeStrokeWidth:u,nodeComponent:m}),(0,o.jsx)("path",{className:"react-flow__minimap-mask",d:`M${W-K},${Y-K}h${Q+2*K}v${G+2*K}h${-Q-2*K}z\n        M${L.x},${L.y}h${L.width}v${L.height}h${-L.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}it.displayName="MiniMap";(0,r.memo)(it);const st={[s.xN.Line]:"right",[s.xN.Handle]:"bottom-right"};(0,r.memo)(function({nodeId:e,position:n,variant:t=s.xN.Handle,className:a,style:l,children:c,color:u,minWidth:m=10,minHeight:h=10,maxWidth:f=Number.MAX_VALUE,maxHeight:b=Number.MAX_VALUE,keepAspectRatio:y=!1,resizeDirection:S,autoScale:C=!0,shouldResize:x,onResizeStart:v,onResize:w,onResizeEnd:E}){const k=ye(),N="string"==typeof e?e:k,M=p(),P=(0,r.useRef)(null),O=t===s.xN.Handle,D=g((0,r.useCallback)((R=O&&C,e=>R?`${Math.max(1/e.transform[2],1)}`:void 0),[O,C]),d.x);var R;const L=(0,r.useRef)(null),I=n??st[t];(0,r.useEffect)(()=>{if(P.current&&N)return L.current||(L.current=(0,s.ET)({domNode:P.current,nodeId:N,getStoreItems:()=>{const{nodeLookup:e,transform:n,snapGrid:t,snapToGrid:o,nodeOrigin:r,domNode:i}=M.getState();return{nodeLookup:e,transform:n,snapGrid:t,snapToGrid:o,nodeOrigin:r,paneDomNode:i}},onChange:(e,n)=>{const{triggerNodeChanges:t,nodeLookup:o,parentLookup:r,nodeOrigin:i}=M.getState(),a=[],d={x:e.x,y:e.y},l=o.get(N);if(l&&l.expandParent&&l.parentId){const n=l.origin??i,t=e.width??l.measured.width??0,c=e.height??l.measured.height??0,u={id:l.id,parentId:l.parentId,rect:{width:t,height:c,...(0,s.us)({x:e.x??l.position.x,y:e.y??l.position.y},{width:t,height:c},l.parentId,o,n)}},g=(0,s.r8)([u],o,r,i);a.push(...g),d.x=e.x?Math.max(n[0]*t,e.x):void 0,d.y=e.y?Math.max(n[1]*c,e.y):void 0}if(void 0!==d.x&&void 0!==d.y){const e={id:N,type:"position",position:{...d}};a.push(e)}if(void 0!==e.width&&void 0!==e.height){const n={id:N,type:"dimensions",resizing:!0,setAttributes:!S||("horizontal"===S?"width":"height"),dimensions:{width:e.width,height:e.height}};a.push(n)}for(const e of n){const n={...e,type:"position"};a.push(n)}t(a)},onEnd:({width:e,height:n})=>{const t={id:N,type:"dimensions",resizing:!1,dimensions:{width:e,height:n}};M.getState().triggerNodeChanges([t])}})),L.current.update({controlPosition:I,boundaries:{minWidth:m,minHeight:h,maxWidth:f,maxHeight:b},keepAspectRatio:y,resizeDirection:S,onResizeStart:v,onResize:w,onResizeEnd:E,shouldResize:x}),()=>{L.current?.destroy()}},[I,m,h,f,b,y,v,w,E,x]);const A=I.split("-");return(0,o.jsx)("div",{className:(0,i.A)(["react-flow__resize-control","nodrag",...A,t,a]),ref:P,style:{...l,scale:D,...u&&{[O?"backgroundColor":"borderColor"]:u}},children:c})})}}]);